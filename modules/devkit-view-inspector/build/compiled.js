;(function(jsio){jsio.path.set(["../node_modules/jsio/packages"]),jsio.path.cache={jsio:"../node_modules/jsio/packages",squill:"../node_modules/squill",src:"./",util:"../node_modules/jsio/packages/util",math:"../node_modules/jsio/packages/math",lib:"../node_modules/jsio/packages/lib",std:"../node_modules/jsio/packages/std"},jsio.setCachedSrc("../node_modules/jsio/packages/base.js",'exports.log=jsio.__env.log,exports.GLOBAL=jsio.__env.global,Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),o=this,n=function(){},e=function(){return o.apply(this instanceof n?this:t,r.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,e.prototype=new n,e});var SLICE=Array.prototype.slice;"function"==typeof Array.isArray?exports.isArray=Array.isArray:exports.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},exports.bind=function(t,r){if(arguments.length>2){var o=SLICE.call(arguments,2);return"string"==typeof r?function(){if(t[r])return t[r].apply(t,o.concat(SLICE.call(arguments,0)));throw logger.error("No method:",r,"for context",t)}:function(){return r.apply(t,o.concat(SLICE.call(arguments,0)))}}return"string"==typeof r?function(){if(t[r])return t[r].apply(t,arguments);throw logger.error("No method:",r,"for context",t)}:function(){return r.apply(t,arguments)}},exports.Class=function(t,r,o){return exports.__class__(function(){return this.init&&this.init.apply(this,arguments)},t,r,o)},exports.__class__=function(t,r,o,n){var e,i=function(){};if("string"!=typeof r&&(n=o,o=r,r=null),r&&(e=exports.logging.get(r)),!o)throw new Error("parent or prototype not provided");if(n||(n=o,o=null),o)if(exports.isArray(o)){i.prototype={};for(var s,a=0;s=o[a];++a){s==Error&&ErrorParentClass&&(s=ErrorParentClass);for(var u in s.prototype)u in i.prototype||(i.prototype[u]=s.prototype[u])}o=o[0]}else o==Error&&ErrorParentClass&&(o=ErrorParentClass),i.prototype=o.prototype;var p=o?function(t,r,n){var e=o.prototype[r];if(!e)throw new Error("method "+r+" does not exist");return e.apply(t,n||[])}:null,s=t.prototype=new i;return s.constructor=t,s.__parentClass__=o,r&&(s.__class__=r),n.call(s,e||p,e&&p),t};var ErrorParentClass=exports.__class__(function(){var t=Error.prototype.constructor.apply(this,arguments);for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r])},function(){});exports.Class.defaults=exports.merge=function(t,r){t=t||{};for(var o=1,n=arguments.length;n>o;++o){var e=arguments[o];for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=e[i])}return t},exports.delay=function(t,r){var o,n,e=null,i=function(){t.apply(o,n)};return function(){o=this,n=arguments,e&&clearTimeout(e),e=setTimeout(i,r||0)}},exports.logging=function(){var t={DEBUG:1,LOG:2,INFO:3,WARN:4,ERROR:5,NONE:10},r={},o=!1,n="";t.setPrefix=function(t){n=t+" "},t.setProduction=function(t){o=!!t;for(var n in r)r[n].setProduction(o)},t.get=function(t){var n=t in r?r[t]:r[t]=new e(t);return n.setProduction(o),n},t.set=function(t,o){r[t]=o},t.getAll=function(){return r},t.__create=function(r,o){o.logger=t.get(r)};var e=exports.__class__(function(r,n){this._name=r,this._isProduction=o,this.setLevel(n||t.LOG)},function(){function r(r){var o=t[r];return function(){if(!this._isProduction&&o>=this._level){var t=r+" "+n+this._name,e=this._listener||exports.log;return e&&e.apply(this._listener,[t].concat(SLICE.call(arguments)))}return arguments[0]}}this.setProduction=function(r){this._isProduction=r,r&&this.setLevel(t.NONE)},this.setLevel=function(r){this._level=r,this._isProduction&&(r=t.NONE),this.DEBUG=r<=t.DEBUG,this.LOG=r<=t.LOG,this.INFO=r<=t.INFO,this.WARN=r<=t.WARN,this.ERROR=r<=t.ERROR},this.setListener=function(t){this._listener=t},this.debug=r("DEBUG"),this.log=r("LOG"),this.info=r("INFO"),this.warn=r("WARN"),this.error=r("ERROR")});return t}();var logger=exports.logging.get("jsiocore");'),jsio.setCachedSrc("devkit-view-inspector/debugger/index.js",'if(jsio("from util.browser import $"),jsio("import util.path"),jsio("import squill.Widget as Widget"),jsio("import .DetailsWidget"),jsio("import .ViewNode"),jsio("import .BatchGetView"),jsio("import squill.Button as Button"),devkit){var module=devkit.getSimulator().getModules()["devkit-view-inspector"],directory=util.path.splitPath(module.path).directory,link=document.createElement("link");link.rel="stylesheet",link.href=util.path.join(directory,"inspector.css"),document.querySelector("head").appendChild(link)}else console.error("no devkit api available?");var ViewInspector=Class(Widget,function(t){function e(t){this._disableHighlight=!1;var e=t.target.getAttribute("data-id");this.highlightView(+e)}function i(t){var e=t.target.getAttribute("data-id");this.selectView(+e),this._deepTrace.style.display="none"}this._def={id:"devkit-view-inspector",style:{width:"650px",display:"none"},children:[{id:"_tree",children:[]},{id:"_details",type:DetailsWidget}]},this.init=function(){this._highlight={timer:0},this._t=0,this._highlighted={},this._trace={list:[],hash:{}},this._nodeIndex={};var e=devkit.getSimulator(),i=e.getParent(),s=i&&i.parentNode||document.body;this._deepTrace=document.createElement("div"),this._deepTrace.setAttribute("id","_deepTrace"),s.appendChild(this._deepTrace),t(this,"init",[{parent:s}]),this._details.setInspector(this),$.onEvent(this._tree,"mouseover",this,function(){this._disableHighlight=!1}),this.setSimulator(e);var h=this._channel.request.bind(this._channel,"getViews");this._batchGetView=new BatchGetView(h),new Button({id:"devkit-view-inspector-toggle-button",parent:s,children:[{tagName:"span",className:"glyphicon glyphicon-search"}]}).on("Select",bind(this,"toggleVisibility"))},this.setSimulator=function(t){this._simulator=t,this._channel=t.getChannel("devkit.debugging.viewInspector").on("inputMove",bind(this,"onInputMove")).on("inputSelect",bind(this,"onInputSelect")).on("inputTrace",bind(this,"onInputTrace")).on("viewPollData",bind(this,function(t){t.uid===this._highlightUID&&(this._highlightPos=t),t.uid===this._selectedUID&&(this._selectedPos=t)}))},this.getViewProps=function(t){return this._channel.request("getViewProps",t)},this.setViewProp=function(t,e,i){return this._channel.request("setViewProp",{uid:t,key:e,value:i})},this.setImage=function(t,e){return this._channel.request("replaceImage",{uid:t,image:e})},this.startDebugging=function(){if(this._simulator){this._unbindMouseout&&(this._unbindMouseout(),this._unbindMouseout=null);var t=bind(this,"onMouseOut"),e=bind(this,"onMouseOver"),i=this._simulator.getFrame();i&&(this._unbindMouseout=bind(i,"removeEventListener","mouseout",t,!0),i.addEventListener("mouseout",t,!0),i.addEventListener("mouseover",e,!0)),this._connectMouseEvents(),this._node&&this._node.destroy(),this._channel.request("getRootUID").bind(this).then(function(t){this._node=new ViewNode({parent:this._tree,inspector:this,viewUID:t,id:"rootNode"})},function(t){logger.warn(t)})}},this.requestView=function(t){return this._batchGetView.request(t)},this.startTimer=function(){this._timer||(this._timer=setInterval(bind(this,"tick"),20))},this.stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},this.onInputMove=function(t){if(this._timer){this._trace.hash={},this._trace.list=t.parents,this._trace.autoExpand={};for(var e,i=0;e=t.parents[i];++i)this._trace.hash[e]=!0,this._trace.autoExpand[e]=!0;var s=t.parents[i-1];this.highlightView(s),this._mouseHoverView=s,this.updateTrace()}},this.onInputSelect=function(t){if(this._timer){this._trace.hash={},this._trace.list=t.parents;for(var e,i=0;e=t.parents[i];++i)this._trace.hash[e]=!0;var s=t.parents[i-1];this.selectView(s),this.updateTrace()}},this.onInputTrace=function(t){this._timer&&this.updateDeepTrace(t)};var s=15;this.updateDeepTrace=function(t){var h=this._simulator,n=h.getFrame().getBoundingClientRect(),o=h.getDevicePixelRatio();this._deepTrace.style.display="block",this._deepTrace.style.left=n.left+t.x/o+5+"px",this._deepTrace.style.top=n.top+t.y/o+"px";for(var r=document.createDocumentFragment(),a=t.trace.length;a--;){var l=document.createElement("div");l.innerText=t.trace[a].tag,l.setAttribute("data-id",t.trace[a].uid),t.trace[a].uid==t.target&&l.setAttribute("class","active"),l.style.paddingLeft=s*t.trace[a].depth+8+"px",l.onmouseover=bind(this,e),l.onclick=bind(this,i),r.appendChild(l)}this._deepTrace.innerHTML="",this._deepTrace.appendChild(r)},this.updateTrace=function(){for(var t in this._highlighted)if(!(t in this._trace.hash)){delete this._highlighted[t];var e=this._nodeIndex[t];e&&e.highlight(!1)}for(var t,i=this._trace.list.length-1,s=0;t=this._trace.list[s];++s){var e=this._nodeIndex[t];e&&(this._trace.autoExpand[t]&&(delete this._trace.autoExpand[t],e.isToggled()||e.toggle()),e.highlight(!0,s==i),this._highlighted[t]=!0)}},this.onMouseOut=function(){if(this._mouseHoverView==this._highlight.target){for(var t in this._highlighted){var e=this._nodeIndex[t];e&&e.highlight(!1)}this._highlighted={},this.highlightView(),this._disableHighlight=!0}},this.onMouseOver=function(){this._disableHighlight=!1},this.highlightView=function(t){var e=this._highlight;e.target=t,this._highlightUID=t,(!t||this._disableHighlight)&&(t=this._selectedUID),this._channel.emit("highlightView",t),this._details.showView(t)},this.selectView=function(t){var e;return this._selectedUID&&(e=this._nodeIndex[this._selectedUID],e&&e.setSelected(!1)),(e=this._nodeIndex[t])?(e.setSelected(!0),this._details.imageView(t,e),this._selectedUID=t,void this._channel.emit("selectView",t)):console.error("No node found for",t)};var h=8e3;this.tick=function(){if(this._node){this._node.refresh(),this._batchGetView.dispatch();var t=this._highlight;if(t.target){var e=+new Date,i=e-this._t;this._t=e,t.timer+=i,t.timer>h&&(t.timer-=h)}}},this.toggleVisibility=function(){this._isShowing=!this._isShowing,this._isShowing?this.open():this.close()},this.isOpen=function(){return this._isShowing},this.onShow=function(){t(this,"onShow",arguments);var e=this.getElement().style;e.display="flex",e.left="0px",e.opacity=1,this.startDebugging(),this.startTimer()},this.open=function(){$.removeClass(this._el,"closed"),this._isShowing=!0,this.show(),this.emit("open")},this.close=function(){this._isShowing=!1,this.stopTimer(),this._disconnectMouseEvents(),$.addClass(this._el,"closed");var t=this._el.style;t.left=-this._el.offsetWidth+"px",t.opacity=0,setTimeout(function(){t.display="none"},300),this._selectedUID=null,this._highlightUID=null,this._channel.emit("selectView",{uid:null}),this._channel.emit("highlightView",{uid:null}),this.stopTimer(),this.emit("close")},this._connectMouseEvents=function(){return this._channel.request("enableInputListener")},this._disconnectMouseEvents=function(){return this._channel.emit("stopPollView"),this._channel.request("disableInputListener")},this._addNode=function(t,e){this._nodeIndex[t]=e},this._removeNode=function(t){delete this._nodeIndex[t]}});module.exports=new ViewInspector;'),jsio.setCachedSrc("../node_modules/jsio/packages/util/browser.js",'function isWindow(e){return e&&!$.isElement(e)&&$.isElement(e.document)}function ieGetAlpha(e){try{return e.filters.item("alpha")}catch(t){}try{return e.filters.item("progid:DXImageTransform.Microsoft.Alpha")}catch(t){}return null}jsio("external .sizzle import Sizzle"),jsio("import math.geom.Rect");var singleId=/^#([\\w-]+)$/,$=exports.$=function(e,t){switch(typeof e){case"object":return $.isElement(e)?$.remove(e):$.isElement(e.document&&e.document.body)?$.size(e):$.create(e);case"string":return singleId.test(e)?$.id(e.substring(1),t):Sizzle.apply(GLOBAL,arguments)}},DOM2="object"==typeof HTMLElement;$.isElement=DOM2?function(e){return e&&e instanceof HTMLElement}:function(e){return e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},$.id=function(e,t){return"string"==typeof e?(t||window).document.getElementById(e):e},$.apply=function(e,t){if(t.attrs)for(attr in t.attrs)e.setAttribute(attr,t.attrs[attr]);t.id&&(e.id=t.id),t.style&&$.style(e,t.style),t.src&&(e.src=t.src),(t["class"]||t.className)&&(e.className=t["class"]||t.className);var n=t.parent||t.parentNode;if(n&&t.first?$.insertBefore(n,e,n.firstChild):t.before?$.insertBefore(t.before.parentNode||n,e,t.before):t.after?$.insertAfter(t.after.parentNode||n,e,t.after):n&&n.appendChild(e),"html"in t&&(e.innerHTML=t.html),"text"in t&&$.setText(e,t.text),t.children)for(var r=t.children,i=0,o=r.length;o>i;++i)e.appendChild($.isElement(r[i])?r[i]:$(r[i]));return e},$.insertBefore=function(e,t,n){e&&t&&(n&&n.parentNode==e?e.insertBefore(t,n):e.appendChild(t))},$.insertAfter=function(e,t,n){e&&t&&(n&&n.parentNode==e?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):$.insertBefore(e,t,e.firstChild))},$.create=function(e){var t=(e&&e.win||window).document;return e&&"string"!=typeof e?$.apply(e.el||t.createElement(e.tag||e.tagName||"div"),e):t.createElement(e||"div")},$.show=function(e,t){$.id(e).style.display=t||"block"},$.hide=function(e){$.id(e).style.display="none"},$.addClass=function(e,t){if(e){var e=$.id(e);"string"==typeof t&&(t=t.split(" "));for(var n=" "+e.className+" ",r=0,i=t.length;i>r;++r){var o=t[r];-1==n.indexOf(" "+o+" ")&&(n+=o+" ")}return e.className=n.replace(/^\\s+|\\s+$/g,""),$}},$.hasClass=function(e,t){if(!e)return!1;for(var e=$.id(e),n=e.className.split(" "),r=0,i=n.length;i>r;++r)if(n[r].trim()===t)return!0;return!1},$.getTag=function(e,t){return e.getElementsByTagName(t)},$.removeClass=function(e,t){if(e){var e=$.id(e);e.className=(" "+e.className+" ").replace(" ","  ").replace(new RegExp("( "+t.replace("s+"," | ").replace("-","-")+" )","g")," ").replace(/\\s+/," ").replace(/^\\s+|\\s+$/g,"")}},$.style=function(e,t){if(e instanceof Array)for(var n,r=0;n=e[r];++r)$.style(n,t);else{e=$.id(e);var i=e.style;for(prop in t)switch(prop){case"styleFloat":case"cssFloat":case"float":i.styleFloat=i.cssFloat=t[prop];break;case"opacity":if(i.opacity=t[prop],e.filters)try{var o=ieGetAlpha(),a=1==t[prop]?99.99:100*t[prop];o?o.Opacity=a:i.filter="alpha(opacity="+a+")"}catch(s){}break;case"borderRadius":i.borderRadius=i.MozBorderRadius=t[prop];break;case"boxSizing":i.MsBoxSizing=i.MozBoxSizing=i.WebkitBoxSizing=t[prop];default:i[prop]=t[prop]}}},$.onEvent=function(e,t,n){"function"!=typeof n&&(n=bind.apply(GLOBAL,Array.prototype.slice.call(arguments,2)));var r=n;return e=$.id(e),e.addEventListener?e.addEventListener(t,r,!1):(r=function(e){var t=e||window.event;n(t)},e.attachEvent("on"+t,r)),bind($,"removeEvent",e,t,r)},$.removeEvent=function(e,t,n){e=$.id(e),e.addEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},$.stopEvent=function(e){e&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault())},$.setText=function(e,t){e=$.id(e),t=String(t),"textContent"in e?e.textContent=t:"innerText"in e?e.innerText=t.replace(/\\n/g," "):(e.innerHTML="",e.appendChild(document.createTextNode(t)))},$.setValue=function(e,t){e=$.id(e),"value"in e?e.value=t:"value"in e.firstChild&&(e.firstChild.value=t)},$.remove=function(e){e=$.id(e),e&&e.parentNode&&e.parentNode.removeChild(e)},$.cursorPos=function(e,t){var n=$.pos(t);return n.top=e.clientY-n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop),n.left=e.clientX-n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft),n},$.pos=function(e){for(var t=e,n={top:0,left:0};t&&t!=document.body;){for(n.left+=t.offsetLeft,n.top+=t.offsetTop;t.offsetParent!=t.parentNode;)n.top-=t.scrollTop,n.left-=t.scrollLeft,t=t.parentNode;t=t.offsetParent}return n},$.size=function(e){if($.isElement(e))return{width:e.offsetWidth,height:e.offsetHeight};if(e.document){var t=e.document.documentElement||e.document.body;return new math.geom.Rect(t.offsetTop,t.offsetLeft,e.innerWidth||t.clientWidth||t.clientWidth,e.innerHeight||t.clientHeight||t.clientHeight)}},$.insertCSSFile=function(e){document.getElementsByTagName("head")[0].appendChild($({tag:"link",attrs:{rel:"stylesheet",type:"text/css",href:e}}))};'),jsio.setCachedSrc("../node_modules/jsio/packages/util/sizzle.js",'Sizzle=function(){function e(e,t,n,r,i,o){for(var u="previousSibling"==e&&!o,a=0,l=r.length;l>a;a++){var f=r[a];if(f){u&&1===f.nodeType&&(f.sizcache=n,f.sizset=a),f=f[e];for(var c=!1;f;){if(f.sizcache===n){c=r[f.sizset];break}if(1!==f.nodeType||o||(f.sizcache=n,f.sizset=a),f.nodeName===t){c=f;break}f=f[e]}r[a]=c}}}function t(e,t,n,r,i,o){for(var a="previousSibling"==e&&!o,l=0,f=r.length;f>l;l++){var c=r[l];if(c){a&&1===c.nodeType&&(c.sizcache=n,c.sizset=l),c=c[e];for(var s=!1;c;){if(c.sizcache===n){s=r[c.sizset];break}if(1===c.nodeType)if(o||(c.sizcache=n,c.sizset=l),"string"!=typeof t){if(c===t){s=!0;break}}else if(u.filter(t,[c]).length>0){s=c;break}c=c[e]}r[l]=s}}}var n=/((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^[\\]]*\\]|[\'"][^\'"]*[\'"]|[^[\\]\'"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?/g,r=0,i=Object.prototype.toString,o=!1,u=function(e,t,r,o){r=r||[];var f=t=t||document;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return r;var s,d,v,g,y=[],T=!0,b=m(t);for(n.lastIndex=0;null!==(s=n.exec(e));)if(y.push(s[1]),s[2]){g=RegExp.rightContext;break}if(y.length>1&&l.exec(e))if(2===y.length&&a.relative[y[0]])d=h(y[0]+y[1],t);else for(d=a.relative[y[0]]?[t]:u(y.shift(),t);y.length;)e=y.shift(),a.relative[e]&&(e+=y.shift()),d=h(e,d);else{if(!o&&y.length>1&&9===t.nodeType&&!b&&a.match.ID.test(y[0])&&!a.match.ID.test(y[y.length-1])){var N=u.find(y.shift(),t,b);t=N.expr?u.filter(N.expr,N.set)[0]:N.set[0]}if(t){var N=o?{expr:y.pop(),set:c(o)}:u.find(y.pop(),1!==y.length||"~"!==y[0]&&"+"!==y[0]||!t.parentNode?t:t.parentNode,b);for(d=N.expr?u.filter(N.expr,N.set):N.set,y.length>0?v=c(d):T=!1;y.length;){var x=y.pop(),E=x;a.relative[x]?E=y.pop():x="",null==E&&(E=t),a.relative[x](v,E,b)}}else v=y=[]}if(v||(v=d),!v)throw"Syntax error, unrecognized expression: "+(x||e);if("[object Array]"===i.call(v))if(T)if(t&&1===t.nodeType)for(var S=0;null!=v[S];S++)v[S]&&(v[S]===!0||1===v[S].nodeType&&p(t,v[S]))&&r.push(d[S]);else for(var S=0;null!=v[S];S++)v[S]&&1===v[S].nodeType&&r.push(d[S]);else r.push.apply(r,v);else c(v,r);return g&&(u(g,f,r,o),u.uniqueSort(r)),r};u.uniqueSort=function(e){if(d&&(o=!1,e.sort(d),o))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)},u.matches=function(e,t){return u(e,null,null,t)},u.find=function(e,t,n){var r,i;if(!e)return[];for(var o=0,u=a.order.length;u>o;o++){var i,l=a.order[o];if(i=a.match[l].exec(e)){var f=RegExp.leftContext;if("\\\\"!==f.substr(f.length-1)&&(i[1]=(i[1]||"").replace(/\\\\/g,""),r=a.find[l](i,t,n),null!=r)){e=e.replace(a.match[l],"");break}}}return r||(r=t.getElementsByTagName("*")),{set:r,expr:e}},u.filter=function(e,t,n,r){for(var i,o,u=e,l=[],f=t,c=t&&t[0]&&m(t[0]);e&&t.length;){for(var s in a.filter)if(null!=(i=a.match[s].exec(e))){var d,p,h=a.filter[s];if(o=!1,f==l&&(l=[]),a.preFilter[s])if(i=a.preFilter[s](i,f,n,l,r,c)){if(i===!0)continue}else o=d=!0;if(i)for(var v=0;null!=(p=f[v]);v++)if(p){d=h(p,i,v,f);var g=r^!!d;n&&null!=d?g?o=!0:f[v]=!1:g&&(l.push(p),o=!0)}if(void 0!==d){if(n||(f=l),e=e.replace(a.match[s],""),!o)return[];break}}if(e==u){if(null==o)throw"Syntax error, unrecognized expression: "+e;break}u=e}return f};var a=u.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,CLASS:/\\.((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,NAME:/\\[name=[\'"]*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)[\'"]*\\]/,ATTR:/\\[\\s*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)\\s*(?:(\\S?=)\\s*([\'"]*)(.*?)\\3|)\\s*\\]/,TAG:/^((?:[\\w\\u00c0-\\uFFFF\\*_-]|\\\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\\((even|odd|[\\dn+-]*)\\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^-]|$)/,PSEUDO:/:((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)(?:\\(([\'"]*)((?:\\([^\\)]+\\)|[^\\2\\(\\)]*)+)\\2\\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(e,t,n){var r="string"==typeof t,i=r&&!/\\W/.test(t),o=r&&!i;i&&!n&&(t=t.toUpperCase());for(var a,l=0,f=e.length;f>l;l++)if(a=e[l]){for(;(a=a.previousSibling)&&1!==a.nodeType;);e[l]=o||a&&a.nodeName===t?a||!1:a===t}o&&u.filter(t,e,!0)},">":function(e,t,n){var r="string"==typeof t;if(r&&!/\\W/.test(t)){t=n?t:t.toUpperCase();for(var i=0,o=e.length;o>i;i++){var a=e[i];if(a){var l=a.parentNode;e[i]=l.nodeName===t?l:!1}}}else{for(var i=0,o=e.length;o>i;i++){var a=e[i];a&&(e[i]=r?a.parentNode:a.parentNode===t)}r&&u.filter(t,e,!0)}},"":function(n,i,o){var u=r++,a=t;if(!/\\W/.test(i)){var l=i=o?i:i.toUpperCase();a=e}a("parentNode",i,u,n,l,o)},"~":function(n,i,o){var u=r++,a=t;if("string"==typeof i&&!/\\W/.test(i)){var l=i=o?i:i.toUpperCase();a=e}a("previousSibling",i,u,n,l,o)}},find:{ID:function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var r=t.getElementById(e[1]);return r?[r]:[]}},NAME:function(e,t,n){if("undefined"!=typeof t.getElementsByName){for(var r=[],i=t.getElementsByName(e[1]),o=0,u=i.length;u>o;o++)i[o].getAttribute("name")===e[1]&&r.push(i[o]);return 0===r.length?null:r}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,o){if(e=" "+e[1].replace(/\\\\/g,"")+" ",o)return e;for(var u,a=0;null!=(u=t[a]);a++)u&&(i^(u.className&&(" "+u.className+" ").indexOf(e)>=0)?n||r.push(u):n&&(t[a]=!1));return!1},ID:function(e){return e[1].replace(/\\\\/g,"")},TAG:function(e,t){for(var n=0;t[n]===!1;n++);return t[n]&&m(t[n])?e[1]:e[1].toUpperCase()},CHILD:function(e){if("nth"==e[1]){var t=/(-?)(\\d*)n((?:\\+|-)?\\d*)/.exec("even"==e[2]&&"2n"||"odd"==e[2]&&"2n+1"||!/\\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}return e[0]=r++,e},ATTR:function(e,t,n,r,i,o){var u=e[1].replace(/\\\\/g,"");return!o&&a.attrMap[u]&&(e[1]=a.attrMap[u]),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,r,i,o){if("not"===e[1]){if(!(n.exec(e[3]).length>1||/^\\w/.test(e[3]))){var l=u.filter(e[3],t,r,!0^o);return r||i.push.apply(i,l),!1}e[3]=u(e[3],null,null,t)}else if(a.match.POS.test(e[0])||a.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!u(n[3],e).length},header:function(e){return/h\\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||"BUTTON"===e.nodeName.toUpperCase()},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0==t},eq:function(e,t,n){return n[3]-0==t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],o=a.filters[i];if(o)return o(e,n,t,r);if("contains"===i)return(e.textContent||e.innerText||"").indexOf(t[3])>=0;if("not"===i){for(var u=t[3],n=0,l=u.length;l>n;n++)if(u[n]===e)return!1;return!0}},CHILD:function(e,t){var n=t[1],r=e;switch(n){case"only":case"first":for(;r=r.previousSibling;)if(1===r.nodeType)return!1;if("first"==n)return!0;r=e;case"last":for(;r=r.nextSibling;)if(1===r.nodeType)return!1;return!0;case"nth":var i=t[2],o=t[3];if(1==i&&0==o)return!0;var u=t[0],a=e.parentNode;if(a&&(a.sizcache!==u||!e.nodeIndex)){var l=0;for(r=a.firstChild;r;r=r.nextSibling)1===r.nodeType&&(r.nodeIndex=++l);a.sizcache=u}var f=e.nodeIndex-o;return 0==i?0==f:f%i==0&&f/i>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||e.nodeName===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=a.attrHandle[n]?a.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),i=r+"",o=t[2],u=t[4];return null==r?"!="===o:"="===o?i===u:"*="===o?i.indexOf(u)>=0:"~="===o?(" "+i+" ").indexOf(u)>=0:u?"!="===o?i!=u:"^="===o?0===i.indexOf(u):"$="===o?i.substr(i.length-u.length)===u:"|="===o?i===u||i.substr(0,u.length+1)===u+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],o=a.setFilters[i];return o?o(e,n,t,r):void 0}}},l=a.match.POS;for(var f in a.match)a.match[f]=new RegExp(a.match[f].source+/(?![^\\[]*\\])(?![^\\(]*\\))/.source);var c=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(s){c=function(e,t){var n=t||[];if("[object Array]"===i.call(e))Array.prototype.push.apply(n,e);else if("number"==typeof e.length)for(var r=0,o=e.length;o>r;r++)n.push(e[r]);else for(var r=0;e[r];r++)n.push(e[r]);return n}}var d;document.documentElement.compareDocumentPosition?d=function(e,t){var n=4&e.compareDocumentPosition(t)?-1:e===t?0:1;return 0===n&&(o=!0),n}:"sourceIndex"in document.documentElement?d=function(e,t){var n=e.sourceIndex-t.sourceIndex;return 0===n&&(o=!0),n}:document.createRange&&(d=function(e,t){var n=e.ownerDocument.createRange(),r=t.ownerDocument.createRange();n.selectNode(e),n.collapse(!0),r.selectNode(t),r.collapse(!0);var i=n.compareBoundaryPoints(Range.START_TO_END,r);return 0===i&&(o=!0),i}),function(){var e=document.createElement("div"),t="script"+(new Date).getTime();e.innerHTML="<a name=\'"+t+"\'/>";var n=document.documentElement;n.insertBefore(e,n.firstChild),document.getElementById(t)&&(a.find.ID=function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var r=t.getElementById(e[1]);return r?r.id===e[1]||"undefined"!=typeof r.getAttributeNode&&r.getAttributeNode("id").nodeValue===e[1]?[r]:void 0:[]}},a.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=document.createElement("div");e.appendChild(document.createComment("")),e.getElementsByTagName("*").length>0&&(a.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var r=[],i=0;n[i];i++)1===n[i].nodeType&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href=\'#\'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(a.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),document.querySelectorAll&&function(){var e=u,t=document.createElement("div");if(t.innerHTML="<p class=\'TEST\'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){u=function(t,n,r,i){if(n=n||document,!i&&9===n.nodeType&&!m(n))try{return c(n.querySelectorAll(t),r)}catch(o){}return e(t,n,r,i)};for(var n in e)u[n]=e[n];t=null}}(),document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var e=document.createElement("div");e.innerHTML="<div class=\'test e\'></div><div class=\'test\'></div>",0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(a.order.splice(1,0,"CLASS"),a.find.CLASS=function(e,t,n){return"undefined"==typeof t.getElementsByClassName||n?void 0:t.getElementsByClassName(e[1])},e=null))}();var p=document.compareDocumentPosition?function(e,t){return 16&e.compareDocumentPosition(t)}:function(e,t){return e!==t&&(e.contains?e.contains(t):!0)},m=function(e){return 9===e.nodeType&&"HTML"!==e.documentElement.nodeName||!!e.ownerDocument&&"HTML"!==e.ownerDocument.documentElement.nodeName},h=function(e,t){for(var n,r=[],i="",o=t.nodeType?[t]:t;n=a.match.PSEUDO.exec(e);)i+=n[0],e=e.replace(a.match.PSEUDO,"");e=a.relative[e]?e+"*":e;for(var l=0,f=o.length;f>l;l++)u(e,o[l],r);return u.filter(i,r)};return u}();'),jsio.setCachedSrc("../node_modules/jsio/packages/math/geom/Rect.js",'jsio("import lib.Enum"),jsio("import .Point"),jsio("import .Line"),jsio("import .intersect");var Rect=exports=Class(function(){this.init=function(t,i,h,s){switch(arguments.length){case 0:this.width=this.height=this.x=this.y=0;break;case 1:this.width=t.width,this.height=t.height,this.x=t.x,this.y=t.y;break;case 2:this.x=t.x,this.y=t.y,this.width=i.x,this.height=i.y;break;case 3:this.x=t.x,this.y=t.y,this.width=i,this.height=h;break;case 4:this.x=t,this.y=i,this.width=h,this.height=s}},this.normalize=function(){return this.width<0&&(this.x-=this.width,this.width=-this.width),this.height<0&&(this.y-=this.height,this.height=-this.height),this},this.intersectRect=function(t){if(intersect.isRectAndRect(this,t)){var i=this.x,h=this.y,s=this.x+this.width,e=this.y+this.height;this.x=Math.max(i,t.x),this.y=Math.max(h,t.y),this.width=Math.min(s,t.x+t.width)-this.x,this.height=Math.min(e,t.y+t.height)-this.y}else this.width=0,this.height=0},this.unionRect=function(t){this.normalize(),t.normalize&&t.normalize();var i=this.x+this.width,h=this.y+this.height,s=t.x+t.width,e=t.y+t.height;this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y,this.width=(i>s?i:s)-this.x,this.height=(h>e?h:e)-this.y},this.getCorner=function(t){switch(t){case CORNERS.TOP_LEFT:return new Point(this.x,this.y);case CORNERS.TOP_RIGHT:return new Point(this.x+this.width,this.y);case CORNERS.BOTTOM_LEFT:return new Point(this.x,this.y+this.height);case CORNERS.BOTTOM_RIGHT:return new Point(this.x+this.width,this.y+this.height)}},this.getSide=function(t){switch(t){case SIDES.TOP:return new Line(this.getCorner(CORNERS.TOP_LEFT),this.getCorner(CORNERS.TOP_RIGHT));case SIDES.RIGHT:return new Line(this.getCorner(CORNERS.TOP_RIGHT),this.getCorner(CORNERS.BOTTOM_RIGHT));case SIDES.BOTTOM:return new Line(this.getCorner(CORNERS.BOTTOM_RIGHT),this.getCorner(CORNERS.BOTTOM_LEFT));case SIDES.LEFT:return new Line(this.getCorner(CORNERS.BOTTOM_LEFT),this.getCorner(CORNERS.TOP_LEFT))}},this.getCenter=function(){return new Point(this.x+this.width/2,this.y+this.height/2)}}),SIDES=Rect.SIDES=lib.Enum("TOP","BOTTOM","LEFT","RIGHT"),CORNERS=Rect.CORNERS=lib.Enum("TOP_LEFT","TOP_RIGHT","BOTTOM_RIGHT","BOTTOM_LEFT");'),jsio.setCachedSrc("../node_modules/jsio/packages/lib/Enum.js",'exports=function(){if(1==arguments.length){if("object"==typeof arguments[0]){var r=arguments[0];for(var t in r)r[t]in r||(r[r[t]]=t);return r}"string"!=typeof arguments[0]&&(n=arguments[0])}if(!n)var n=arguments;for(var r={},t=0,e=n.length;e>t;++t)n[t]&&(r[n[t]]=t+1),r[t+1]=n[t];return r};'),jsio.setCachedSrc("../node_modules/jsio/packages/math/geom/Point.js",'var Point=exports=Class(function(){this.init=function(t,n){switch(arguments.length){case 0:this.x=0,this.y=0;break;case 1:this.x=t.x||0,this.y=t.y||0;break;case 2:this.x=t||0,this.y=n||0}},this.rotate=function(t){var n=this.x,i=this.y,e=Math.cos(t),s=Math.sin(t);return this.x=n*e-i*s,this.y=n*s+i*e,this},this.translate=this.add=function(t,n){return"number"==typeof t?(this.x+=t,this.y+=n):(this.x+=t.x,this.y+=t.y),this},this.subtract=function(t,n){return"number"==typeof t?(this.x-=t,this.y-=n):(this.x-=t.x,this.y-=t.y),this},this.scale=function(t,n){return void 0===n&&(n=t),this.x*=t,this.y*=n,this},this.setMagnitude=function(t){var n=this.getAngle();return this.x=t*Math.cos(n),this.y=t*Math.sin(n),this},this.normalize=function(){var t=this.getMagnitude();return this.x/=t,this.y/=t,this},this.addMagnitude=function(t){return this.setMagnitude(this.getMagnitude()+t)},this.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},this.getSquaredMagnitude=function(){return this.x*this.x+this.y*this.y},this.getDirection=this.getAngle=function(){return Math.atan2(this.y,this.x)}});Point.getPolarR=function(t,n){throw"notImplemented"},Point.getPolarTheta=function(t,n){var i=Math.atan2(n,t)+2*Math.PI;return i>2*Math.PI?i%(2*Math.PI):i},Point.add=Point.translate=function(t,n,i,e){switch(arguments.length){case 2:return new Point(t).add(n);case 3:return new Point(t).add(n,i);case 4:return new Point(t,n).add(i,e)}},Point.subtract=function(t,n,i,e){switch(arguments.length){case 2:return new Point(t).subtract(n);case 3:return new Point(t).subtract(n,i);case 4:return new Point(t,n).subtract(i,e)}},Point.scale=function(t,n,i){switch(arguments.length){case 2:return new Point(t).scale(n);case 3:return new Point(t,n).scale(i)}},Point.setMagnitude=function(t,n,i){switch(arguments.length){case 2:return new Point(t).setMagnitude(i);case 3:return new Point(t,n).setMagnitude(i)}},Point.addMagnitude=function(t,n,i){switch(arguments.length){case 2:pt=new Point(t);break;case 3:pt=new Point(t,n),n=i}return pt.addMagnitude(n)},Point.getMagnitude=function(t,n){return new Point(t,n).getMagnitude()},Point.rotate=function(t,n,i){switch(arguments.length){case 2:return new Point(t).rotate(n);case 3:return new Point(t,n).rotate(i)}},Point.project=function(t,n){var i=new Point(n).normalize();return i.scale(i.x*t.x+i.y*t.y)};'),
jsio.setCachedSrc("../node_modules/jsio/packages/math/geom/Line.js",'jsio("import .Point"),exports=Class(function(){this.init=function(t,n,i,s){switch(arguments.length){case 0:this.start=new Point,this.end=new Point;break;case 1:this.start=new Point(t.start),this.end=new Point(t.end);break;case 2:this.start=new Point(t),this.end=new Point(n);break;case 3:this.start=new Point(t),this.end=new Point(n,i);break;case 4:default:this.start=new Point(t,n),this.end=new Point(i,s)}},this.getMagnitude=this.getLength=function(){var t=this.end.x-this.start.x,n=this.end.y-this.start.y;return Math.sqrt(t*t+n*n)}});'),jsio.setCachedSrc("../node_modules/jsio/packages/math/geom/intersect.js",'jsio("import .Point"),jsio("import .Line"),jsio("import .Rect");var intersect=exports;intersect.pointAndRect=intersect.ptAndRect=function(t,e){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height},intersect.rectAndPoint=intersect.rectAndPt=function(t,e){return intersect.pointAndRect(e,t)},intersect.pointAndCircle=intersect.ptAndCirc=function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i<e.radius*e.radius},intersect.circleAndPoint=intersect.circAndPt=function(t,e){return intersect.pointAndCircle(e,t)},intersect.circleAndCircle=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.radius+e.radius;return r*r>=n*n+i*i},intersect.isRectAndRect=function(t,e){return!(t.y+t.height<e.y||e.y+e.height<t.y||t.x+t.width<e.x||e.x+e.width<t.x)},intersect.circleAndRect=function(t,e){return intersect.pointAndRect(t,e)?!0:intersect.lineAndCircle(e.getSide(1),t)||intersect.lineAndCircle(e.getSide(2),t)||intersect.lineAndCircle(e.getSide(3),t)||intersect.lineAndCircle(e.getSide(4),t)},intersect.rectAndCircle=function(t,e){return intersect.circleAndRect(e,t)},intersect.lineAndCircle=function(t,e){var n=intersect.pointToLine(e,t);return n.getMagnitude()<e.radius},intersect.circleAndLine=function(t,e){return intersect.lineAndCircle(e,t)},intersect.pointToLine=intersect.ptToLine=function(t,e){var n,i=e.end.x-e.start.x,r=e.end.y-e.start.y,c=((t.x-e.start.x)*i+(t.y-e.start.y)*r)/(i*i+r*r);return n=0>c?new Point(e.start):c>1?new Point(e.end):new Point(e.start.x+c*i,e.start.y+c*r),new Line(n,t)},intersect.rectAndRect=function(t,e){return jsio("import .Rect"),(intersect.rectAndRect=function(t,e){if(t===!0)return new Rect(e);if(e===!0)return new Rect(e);if(intersect.isRectAndRect(t,e)){var n=Math.max(t.x,e.x),i=Math.max(t.y,e.y),r=Math.min(t.x+t.width,e.x+e.width),c=Math.min(t.y+t.height,e.y+e.height);return new Rect(n,i,r-n,c-i)}return null})(t,e)};'),jsio.setCachedSrc("../node_modules/jsio/packages/util/path.js",'var util=jsio.__jsio.__util;exports.join=util.buildPath,exports.resolveRelativePath=util.resolveRelativePath,exports.splitPath=util.splitPath,exports.relative=util.relative,exports.splitExt=function(e){var t=exports.splitPath(e),i=t.filename.lastIndexOf(".");return-1==i?(t.basename=t.filename,t.ext=""):(t.basename=t.filename.substring(0,i),t.ext=t.filename.substring(i)),t};'),jsio.setCachedSrc("../node_modules/squill/Alpha.js",'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import .jscolor.jscolor as jscolor");var alphaSelect=!1,alphaIndicator,Alpha=exports=Class(Widget,function(t){this._css="lph",this._type="text",this.init=function(e){e=merge(e,{tag:"input"}),t(this,"init",[e])},this.buildWidget=function(){var t=this._el;t.widget=this,$.onEvent(t,"focus",this,"_onFocus"),$.onEvent(t,"blur",this,"_onBlur"),$.onEvent(t,"change",this,"_onChange");var e,o;alphaSelect||(alphaSelect=document.createElement("div"),alphaSelect.style.display="none",alphaSelect.className="colorMenu",document.body.appendChild(alphaSelect),$.onEvent(alphaSelect,"mousedown",this,"_onSelect"),e=document.createElement("canvas"),e.width=20,e.height=100,alphaSelect.appendChild(e),$.style(e,{"float":"left",width:"20px",height:"100px",margin:"8px 0 0 12px",border:"1px solid #000",borderColor:"ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",backgroundColor:"red"}),$.onEvent(e,"mousedown",this,"_onMouseDown"),$.onEvent(e,"mousemove",this,"_onMouseMove"),$.onEvent(e,"mouseup",this,"_onMouseUp"),$.onEvent(e,"mouseout",this,"_onMouseOut"),alphaIndicator=document.createElement("img"),alphaIndicator.src="img/colorpicker/arrow.gif",alphaSelect.appendChild(alphaIndicator),$.style(alphaIndicator,{position:"absolute",left:"4px",top:"2px",border:"0px hidden"}),o=e.getContext("2d"),linearGradient=o.createLinearGradient(0,0,0,100),linearGradient.addColorStop(0,"#FFFFFF"),linearGradient.addColorStop(1,"#000000"),o.fillStyle=linearGradient,o.fillRect(0,0,20,100))},this._showIndicator=function(t){return 0>t&&(t=0),t>100&&(t=100),$.style(alphaIndicator,{position:"absolute",left:"4px",top:2+t+"px",border:"0px hidden"}),t},this._showMouseAlpha=function(t){alphaSelect.target.value=100-this._showIndicator(t.offsetY),alphaSelect.widget.publish("Change",parseInt(alphaSelect.target.value,10))},this._onChange=function(t){var e=this._el.value;isNaN(e)||(e=parseInt(e,10),e>=0&&100>=e&&alphaSelect.widget.publish("Change",e))},this._onFocus=function(t){var e,o=(alphaSelect.style,this._el.getBoundingClientRect()),n=o.right+4,i=o.top;i+122>window.innerHeight&&(i=o.bottom-122),n+44>window.innerWidth&&(n=o.left-48),$.style(alphaSelect,{position:"absolute",width:"44px",height:"122px",zIndex:"1000000",left:n+"px",top:i+"px",display:"block"}),alphaSelect.widget=t.target.widget,alphaSelect.target=t.target,e=isNaN(alphaSelect.target.value)?0:parseInt(alphaSelect.target.value,10),this._showIndicator(100-e)},this._onBlur=function(t){alphaSelect.style.display="none"},this._onSelect=function(t){$.stopEvent(t)},this._onMouseDown=function(t){$.stopEvent(t),this._showMouseAlpha(t),this._mouseDown=!0},this._onMouseMove=function(t){this._mouseDown&&this._showMouseAlpha(t),$.stopEvent(t)},this._onMouseOut=function(t){this._mouseDown=!1,$.stopEvent(t)},this._onMouseUp=function(t){this._mouseDown=!1,$.stopEvent(t)},this.setValue=function(t){this._el.value=t},this.getValue=function(){return this._el.value}});'),jsio.setCachedSrc("../node_modules/squill/Widget.js",'function shallowCopy(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}jsio("from util.browser import $"),jsio("import .Element, .Events, .global"),jsio("import .i18n"),jsio("import .Delegate"),jsio("import .models.Model as Model"),jsio("import .models.bindings as bindings"),jsio("from .__imports__ import classes as WIDGET_CLASSES");var uid=0,WidgetSet=Class(function(){this.init=function(t){this._target=t,this.events=[]},this.getTarget=function(){return this._target},this.hasWidget=function(t){return!!this._target[t]},this.addWidget=function(t,e){this._target[t]=e},this.addSubscription=function(t,e){this._target.dispatchEvent&&t.subscribe.apply(t,[e,this._target,"dispatchEvent",t.getId()].concat(Array.prototype.slice.call(arguments,2)))}}),Widget=exports=Class([Element,Events],function(){function t(t){var e=$.id(t);e.parentNode.insertBefore(this._el,e),e.parentNode.removeChild(e)}this._css="widget",this._name="",this.__getDef__=function(){function t(t){for(var e in t)"attrs"==e||"style"==e?i[e]=merge(i[e],t[e]):"className"==e&&i.className?i.className=t.className+" "+i.className:"children"==e?i.children?i.children.push(t.children):i.children=[t.children]:i.hasOwnProperty(e)||(i[e]=t[e])}var e=this.constructor,i={};do e.prototype.hasOwnProperty("_def")&&t(e.prototype._def);while(e=e.prototype.__parentClass__);return this.hasOwnProperty("_def")&&t(this._def),i},this.init=function(t){t=t||{},this._children=[];var e=this._def=this.__getDef__();this._id=e.id,this.__model=new Model(t.model||e.model),e.className&&(t.className=t.className?t.className+" "+e.className:e.className),e.attrs&&(t.attrs=merge(t.attrs,e.attrs)),e.style&&(t.style=merge(t.style,e.style)),this._opts=t;for(var i in e)"children"!=i&&!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(t[i]=e[i]);t.name&&(this._name=t.name),t.delegate&&(this.delegate=t.delegate);var s;if(t.widgetParent&&(s=t.widgetParent),this.controller=t.controller||s,t.parent){var n=t.parent,r=n instanceof Widget;r?(s||(s=t.parent),t.parent=n.getContainer()):n.appendChild||delete t.parent}s?s.addWidget(this):(t.parent||t.el)&&this.build(t.el)},this.getOpts=function(){return this._opts},this.getId=function(){return this._id||this._el&&this._el.id},this.build=function(t){if(!this._el||this._el!=t){var e=this._opts,i=e.children;i&&delete e.children,this._el=$.create(this._opts),i&&(e.children=i),this.buildContent()}return this},this.getParent=function(){return this._el&&this._el.parentNode},this.getWidgetParent=function(){return this._widgetParent},this.setWidgetParent=function(t){this._widgetParent!=t&&(this._widgetParent.removeWidget(this),t.addWidget(this),this._widgetParent=t)},this.getChildren=function(){return this._children},this.forEachDescend=function(t,e){for(var i=this._children.length,s=0;i>s;++s){var n=this._children[s];t.call(e,n),n.forEachDescend&&n.forEachDescend(t,e)}},this.getFirstChild=function(){return this._children&&this._children.length?this._children[0]:null},this.dispatchEvent=function(t,e){this.delegate.apply(this,arguments)},this.addElement=function(t){this._el.appendChild(t)},this.addWidget=function(t,e,i){if(this._el||this.build(),e=t.parent||e||this.getContainer()||this._el,t instanceof Widget)r=t;else{var s=merge({},t,{parent:e,__result:i});if(s.children){var n=s.children;delete s.children}var r;if("type"in s&&!s.type&&logger.warn("Did you forget to provide a type?",s),s.type&&"string"!=typeof s.type)r=new s.type(s);else if(WIDGET_CLASSES[s.type]){var h=jsio("import "+WIDGET_CLASSES[s.type]);r=new h(s)}else i?("image"==s.type&&(s=merge({tag:"img"},s)),r=$(s)):r=new Widget(s);i&&s.id&&!i.hasWidget(s.id)&&i.addWidget(s.id,r)}if(r instanceof Widget){if(r.getWidgetParent()!=this){var a=r.getWidgetParent();a&&a.removeWidget(this),r._widgetParent=this,r.controller||(r.controller=this),this._children.push(r)}r.getParent()!=e&&r.setParent(e)}if(n)if(r.buildChildren)i||(i=new WidgetSet(r)),r.buildChildren(n,null,i);else for(var o,l=0;o=n[l];++l)this.addWidget(o,r,i);return r},this.removeWidget=function(t){var e=this._children.indexOf(t);e>=0&&this._children.splice(e,1)},this.getContainer=function(){return this._el},this.getName=function(){return this._name},this.setName=function(t){this._name=t},this.buildContent=function(){var t=this._opts;null!==global.getWidgetPrefix()&&$.addClass(this._el,global.getWidgetPrefix()+this._css),this.delegate||(this.delegate=new Delegate),t.errorLabel&&(this._errorLabel=$.create({html:t.errorLabel,className:global.getWidgetPrefix()+"textInputErrorLabel",parent:this._el}));var e=this._def;if(e.children)for(var i=new WidgetSet(this),s=e.children.length-1;s>=0;--s)this.buildChildren(e.children[s],null,i);var n=t.__result||i||new WidgetSet(this);t.children&&this.buildChildren(t.children,null,n),t.data&&this.setData&&bindings.parseData(this,t.data),this.buildWidget(this._el,n)},this.buildChildren=function(t,e,i){e||(e=this.getContainer()||this._el);for(var s=0,n=t.length;n>s;++s)this.addWidget(t[s],e,i)},this.buildWidget=function(){},this.errors=function(){return this.validators.map(function(t){return 0==t.isValid?t.message:void 0})},this.validate=function(){for(var t=!0,e=0,i=this.validators.length;i>e;++e){var s=this.validators[e];t=t&&(s.isValid=s.call(this))}return this._isValid=t},this._isValid=!0,this.isValid=function(){return this._isValid},this.validators=[],this.getI18n=function(t,e){var i=t in this._opts?this._opts:i18n.get(e||this._opts.id);return i&&i[t]||""},this.getElement=function(){return this._el||this.build(),this._el},this.addClass=function(t){$.addClass(this._el,t)},this.removeClass=function(t){$.removeClass(this._el,t)},this.hasClass=function(t){return(" "+this._el.className+" ").indexOf(t)>=0},this.toggleClass=function(t,e){void 0===e&&(e=!this.hasClass(t)),e?this.addClass(t):this.removeClass(t)},this.onBeforeShow=function(){for(var t,e=0;t=this._children[e];++e)t.onBeforeShow.apply(t,arguments)},this.onShow=function(){this._isShowing=!0;for(var t,e=0;t=this._children[e];++e)t.onShow.apply(t,arguments)},this.onBeforeHide=function(){for(var t,e=0;t=this._children[e];++e)t.onBeforeHide.apply(t,arguments)},this.onHide=function(){this._isShowing=!1;for(var t,e=0;t=this._children[e];++e)t.onHide.apply(t,arguments)},this.isShowing=function(){return this._isShowing},this.show=function(){this.onBeforeShow();var t=this._opts&&this._opts.style,e=t&&"none"!=t.display&&t.display||"block";return this._el&&(this._el.style.display=e),this.onShow(),this},this.hide=function(){return this.onBeforeHide(),$.hide(this.getElement()),this.onHide(),this},this.removeChildren=function(){this._children.forEach(function(t){t.remove()})},this.remove=function(){this.onBeforeHide(),$.remove(this.getElement()),this.onHide()},this.getModel=function(){return this.__model},this.setModel=function(t,e){return 1==arguments.length?this.__model.setObject(t):this.__model.set(t,e),this},this.putHere=function(){this._el||this.build();var e="jsioWidgetId"+ ++uid;return global.getTargetDocument().write(\'<div id="\'+e+\'"></div>\'),setTimeout(bind(this,t,e),0),this},this.appendTo=this.setParent=function(t){var e=t&&(t.getContainer&&t.getContainer()||t.appendChild&&t||$.id(t));return e&&(this._el?e.appendChild(this._el):(this._opts.parent=e,this.build())),this}}),map={},lowerCaseMap={};Widget.register=function(t,e){if(e in map)throw Error("A widget with name \'"+e+"\' is already registered");map[e]=t,lowerCaseMap[e.toLowerCase()]=t},Widget.get=function(t){return lowerCaseMap[t.toLowerCase()]},Widget.WidgetSet=WidgetSet;'),jsio.setCachedSrc("../node_modules/squill/Element.js",'jsio("import lib.PubSub"),jsio("from util.browser import $");var Element=exports=Class(lib.PubSub,function(t){this.init=function(t){this._opts=JS.merge(t,{win:window,tag:"div"})},this.build=function(){return this._el||(this._opts.el?(this._el=this._opts.el,$.apply(this._el,this._opts)):this._el=$.create(this._opts),this.buildContent()),this},this.getId=function(){return this._el&&this._el.id||this._opts&&this._opts.id},this.buildContent=function(){},this.destroy=function(){!this._el},this.getElement=function(){return this._el||this.build()._el},this.appendChild=function(t){return this._el||this.build(),this._el.appendChild(t instanceof Element?t._el:t),this},this.appendTo=function(t){return this._el||this.build(),t instanceof Element?t.appendChild(this):t.appendChild(this._el),this},this.setPos=function(t,i){this._el.style.x=t+"px",this._el.style.y=i+"px"},this.center=function(){var t=$(window);this.setPos(Math.max(0,t.width-this._el.offsetWidth)/2,Math.max(0,t.height-this._el.offsetHeight)/2)},this.remove=function(){$.remove(this._el)}});'),jsio.setCachedSrc("../node_modules/jsio/packages/lib/PubSub.js",'jsio("from ..std.uuid import uuid");var ctx=jsio.__env.global,SLICE=Array.prototype.slice;exports=Class(function(){this.init=function(){},this.publish=function(s){if(this._subscribers){var i=SLICE.call(arguments,1);if(this._subscribers.__any)for(var t,e=[s].concat(i),r=this._subscribers.__any.slice(0),n=0;t=r[n];++n)t.apply(ctx,e);if(!this._subscribers[s])return this;for(var t,r=this._subscribers[s].slice(0),n=0;t=r[n];++n)t.apply(ctx,i)}return this},this.subscribe=function(s,i,t){var e;2==arguments.length?e=i:(e=bind.apply(GLOBAL,SLICE.call(arguments,1)),e._ctx=i,e._method=t);var r=this._subscribers||(this._subscribers={});return(r[s]||(r[s]=[])).push(e),this},this.subscribeOnce=function(s,i,t){var e=arguments,r=bind(this,function(){this.unsubscribe(s,r),2==e.length?i.apply(GLOBAL,arguments):bind.apply(GLOBAL,SLICE.call(e,1)).apply(GLOBAL,arguments)});return e.length>=3&&(r._ctx=i,r._method=t),this.subscribe(s,r)},this.unsubscribe=function(s,i,t){if(!this._subscribers||!this._subscribers[s])return this;for(var e,r=this._subscribers[s],n=0;e=r[n];++n)e!=i&&(e._ctx!=i||t&&e._method!=t)||r.splice(n--,1);return this},this.listeners=function(s){return this._subscribers=this._subscribers?this._subscribers:{},this.hasOwnProperty.call(this._subscribers,s)?this._subscribers[s]:this._subscribers[s]=[]},this.addListener=this.on=function(s,i){return this.listeners(s).length+1>this._maxListeners&&0!==this._maxListeners&&"undefined"!=typeof console&&console.warn("Possible EventEmitter memory leak detected. "+this._subscribers[s].length+" listeners added. Use emitter.setMaxListeners() to increase limit."),this.emit("newListener",s,i),this.subscribe(s,this,i)},this.once=function(s,i){return this.subscribeOnce(s,this,i)},this.removeListener=function(s,i){return this.unsubscribe(s,this,i),this},this.removeAllListeners=function(s){if(this._subscribers)for(var i in this._subscribers)(null==s||s==i)&&delete this._subscribers[i];return this},this.emit=function(s){return this.publish.apply(this,arguments),this.listeners(s).length>0},this._maxListeners=10,this.setMaxListeners=function(s){this._maxListeners=s},this.hasListeners=function(s){return this._subscribers&&this._subscribers[s]&&this._subscribers[s].length},this.listenTo=function(s,i,t){var e=this._listeningTo||(this._listeningTo={}),r=s._listenId||(s._listenId=uuid(8,16));return e[r]=s,s.subscribe(i,this,t),this},this.stopListening=function(s,i,t){var e,r,n,h,u,b,c,l,o=this._listeningTo;if(!o)return this;logger.log(s);var _=!i&&!t;s&&((o={})[s._listenId]=s);for(var a in o){for(s=o[a],r=i?[i]:Object.keys(s._subscribers),h=0,c=r.length;c>h;h++)if(i=r[h],e=s._subscribers[i]){for(s._subscribers[i]=n=[],u=0,b=e.length;b>u;u++)l=e[u],(t&&t!==l._method||this&&this!==l._ctx)&&n.push(l);n.length||delete s._subscribers[i]}_&&delete this._listeningTo[a]}return this}});'),jsio.setCachedSrc("../node_modules/jsio/packages/std/uuid.js",'var CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");exports.uuid=function(r,a){var n=CHARS,o=[],t=Math.random;if(a=a||n.length,r)for(var e=0;r>e;e++)o[e]=n[0|t()*a];else{var i;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(var e=0;36>e;e++)o[e]||(i=0|16*t(),o[e]=n[19==e?3&i|8:15&i])}return o.join("")};'),jsio.setCachedSrc("../node_modules/squill/Events.js",'jsio("from util.browser import $"),jsio("import .Drag"),jsio("import lib.PubSub"),exports=Class(lib.PubSub,function(){var t=Array.prototype.slice,s=/(iPod|iPhone|iPad|Android)/i.test(navigator.userAgent);this.event=function(s,i,n){this._eventEnabled||(this._eventEnabled={});var e=[this,n].concat(t.call(arguments,3)),n=bind.apply(this,e),o=this._eventEnabled;o[i]=!0,$.onEvent(s,i,function(){return o[i]?n.apply(this,arguments):void 0})},this.isDragging=function(){return this._isDragging||!1},this.initDragEvents=function(t){if(!this.__drag){var s=this.__drag=new Drag;s.subscribe("DragStart",this,"onDragStart"),s.subscribe("Drag",this,"onDrag"),s.subscribe("DragStop",this,"onDragStop")}var i=bind(this.__drag,"startDrag");t||(t=this._el),t.addEventListener&&t.addEventListener("touchstart",i,!0),$.onEvent(t,"mousedown",i)},this.initMouseEvents=function(t){t=t||this._el,s?(this.event(t,"touchstart","_onTouchStart"),this.event(t,"touchend","_onTouchEnd")):(this.event(t,"mouseover","onMouseOver"),this.event(t,"mousemove","onMouseMove"),this.event(t,"mouseout","onMouseOut"),this.event(t,"mousedown","onMouseDown"),this.event(t,"mouseup","onMouseUp"),this.event(t,"click","onClick"));var i=this._opts;return i&&i.__result&&i.__result.addSubscription(this,"Select"),this},this.initFocusEvents=function(t){return t=t||this._el,this.event(t,"focus","onFocus"),this.event(t,"blur","onBlur"),this},this.initKeyEvents=function(t){return t=t||this._el,this.event(t,"keydown","onKeyDown"),this.event(t,"keypress","onKeyPress"),this.event(t,"keyup","onKeyUp"),this},this._onTouchStart=function(t){this.onMouseOver(t),this.onMouseDown(t)},this._onTouchEnd=function(t){this.onMouseUp(t),this.onClick(t),this.onMouseOut(t)},this.onMouseOver=function(t){this._enableMouseEvents||(this._isOver=!0),this.publish("Over",t)},this.onMouseMove=function(t){this._enableMouseEvents||this.publish("Move",t)},this.onMouseOut=function(t){this._isOver=!1,this.publish("Out",t)},this.onMouseDown=function(t){return this._isDown=!0,this.publish("Down",t),!1},this.onMouseUp=function(t){return this._isDown=!1,this.publish("Up",t),!1},this.onClick=function(t){return this.publish("Select",t),this.emit("click",t),!1},this.onFocus=function(t){this._isFocused=!0,this.publish("Focus",t)},this.onBlur=function(t){this._isFocused=!1,this.publish("Blur",t)},this.onKeyUp=function(t){this.publish("KeyUp",t)},this.onKeyPress=function(t){this.publish("KeyPress",t)},this.onKeyDown=function(t){this.publish("KeyDown",t)},this.onDragStart=function(t){},this.onDrag=function(t,s){},this.onDragStop=function(t,s){}});'),jsio.setCachedSrc("../node_modules/squill/Drag.js",'function resolveMouse(e){if(e.touches)return resolveMouse(e.touches[0]);if("pageX"in e)gCurrentMouse.x=e.pageX,gCurrentMouse.y=e.pageY;else{var t=document.documentElement,r=document.body;gCurrentMouse.x=e.clientX+(t&&t.scrollLeft||r&&r.scrollLeft||0)-(t&&t.clientLeft||r&&r.clientLeft||0),gCurrentMouse.y=e.clientY+(t&&t.scrollTop||r&&r.scrollTop||0)-(t&&t.clientTop||r&&r.clientTop||0)}}function gAddItem(e){gRemoveItem(e),gCurrentDrag.push(e),_active=!0}function gRemoveItem(e){for(var t=0;t<gCurrentDrag.length;++t)gCurrentDrag[t]==e&&(gCurrentDrag.splice(t,1),--t);gCurrentDrag[0]||(_active=!1)}function onMove(e){if(_active){resolveMouse(e);for(var t=0;t<gCurrentDrag.length;++t)gCurrentDrag[t].onMouseMove(e)}}function onUp(e){if(_active)for(var t=0;t<gCurrentDrag.length;++t)gCurrentDrag[t].onMouseUp(e)}function registerWindow(e){var t=e.document;"ontouchstart"in e?(t.addEventListener("touchstart",resolveMouse,!0),t.addEventListener("touchmove",onMove,!0),t.addEventListener("touchend",onUp,!0)):(t.addEventListener("mousedown",resolveMouse,!0),t.addEventListener("mousemove",onMove,!0),t.addEventListener("mouseup",onUp,!0))}jsio("import lib.PubSub"),jsio("import math.geom.Point as Point"),jsio("from util.browser import $");var gCurrentDrag=[],gCurrentMouse={x:0,y:0},_active=!1;exports=Class(lib.PubSub,function(e){this.init=function(e){this._isActive=!1},this.isDragging=function(){return this._isActive},this.startDrag=function(e,t){var r=this._evt=new exports.DragEvent;this._evt.data=t,this._evt.params=merge(e,{threshold:5}),r.srcPt=new Point(gCurrentMouse),r.currPt=new Point(gCurrentMouse),gAddItem(this)},this.onMouseMove=function(e){var t=this._evt,r=Point.subtract(gCurrentMouse,t.srcPt);if(!this._isActive&&r.getMagnitude()>t.params.threshold){this._isActive=!0;var n=e.target&&(e.target.ownerDocument||9==e.target.nodeType&&e.target);this.disableIframes(n),this.publish("DragStart",t)}this._isActive&&($.stopEvent(e),t.prevPt=t.currPt,t.currPt=new Point(gCurrentMouse),this.publish("Drag",t,e,Point.subtract(t.currPt,t.prevPt)))},this.onMouseUp=function(e){return gRemoveItem(this),this._isActive?($.stopEvent(e),this._isActive=!1,this.enableIframes(),this.publish("DragStop",this._evt,e),!0):void 0},this.disableIframes=function(e){this._disabledFrames||(this._disabledFrames=[]),$("iframe",e).forEach(function(e){try{this._disabledFrames.push({frame:e,pointerEvents:e.style.pointerEvents}),e.style.pointerEvents="none"}catch(t){}},this)},this.enableIframes=function(){this._disabledFrames.splice(0,this._disabledFrames.length).forEach(function(e){e.frame.style.pointerEvents=e.pointerEvents})}}),exports.registerWindow=registerWindow,exports.DragEvent=Class(function(){});var win=window;for(registerWindow(win);win.parent!=win;){win=win.parent;try{registerWindow(win)}catch(e){}}'),jsio.setCachedSrc("../node_modules/squill/global.js",'var gWidgetPrefix="squill-",gWin=window,gDoc=document;exports.setTargetWindow=function(e){gWin=e,gDoc=e.document},exports.getTargetWindow=function(){return gWin},exports.getTargetDocument=function(){return gDoc},exports.setWidgetPrefix=function(e){gWidgetPrefix=e},exports.getWidgetPrefix=function(){return gWidgetPrefix};'),jsio.setCachedSrc("../node_modules/squill/i18n.js","var gLang=null;exports.setLang=function(t){gLang=t},exports.get=function(t){return gLang&&gLang.get(t)},exports.Language=Class(function(){this.init=function(t){this._dict=t},this.add=function(t,n){this._dict[t]=n},this.get=function(t){return this._dict[t]}});"),jsio.setCachedSrc("../node_modules/squill/Delegate.js","var SLICE=Array.prototype.slice,Delegate=exports=Class(function(){this.init=function(t){t&&t(this)},this.extend=function(t){var a=new Delegate(t);return a.parent=this,a},this.call=function(t,a){return this[a]?this[a].apply(t,SLICE.call(arguments,2)):this.parent?this.parent.apply(t,SLICE.call(arguments,1)):void 0},this.apply=function(t,a){this.call.apply(this,[t].concat(SLICE.call(a)))}});"),jsio.setCachedSrc("../node_modules/squill/models/Model.js",'jsio("import lib.PubSub");var Model=exports=Class(lib.PubSub,function(t){function i(t){return JSON.parse(JSON.stringify(t))}function s(t){return t.split(r).map(function(t){return"]"==t[t.length-1]?parseInt(t):t})}function e(t,i){return 0==t.indexOf(i)||0==i.indexOf(t)}this.init=function(t){var i;if(t instanceof Model){var s=t;t={localStorage:s._storageKey},i=s._data}if(this._data={},t&&t.localStorage&&(this._storageKey=t.localStorage,void 0===i)){var e=localStorage.getItem(this._storageKey);if(e)try{i=JSON.parse(e)}catch(r){}}this.setObject(i||{}),t&&(t.values&&Object.keys(t.values).forEach(function(i){this.set(i,t.values[i])},this),t.defaults&&Object.keys(t.defaults).forEach(function(i){this.has(i)||this.set(i,t.defaults[i])},this))},this.setObject=function(t){return this._data=t,this.emit(),this.persist(),this},this.toObject=function(){return i(this._data)},this.clone=function(){return new Model(this.getObject())};var r=/[\\[.,]/;this.has=function(t){return void 0!==this.get(t)},this.get=function(t){for(var i=s(t),e=i.length,r=0,n=this._data;n&&e>r;)n=n[i[r++]];return n},this.getObject=function(t){return i(this.get(t)||{})},this.set=function(t,i){for(var e=s(t),r=e.length-1,n=0,a=this._data;a&&r>n;){var h=e[n++];a[h]||(a[h]="number"==typeof e[n]?[]:{}),a=a[h]}var o=a[e[r]];return i!=o&&(a[e[r]]=i,this.emit(t,i)),this.persist(),this},this.emit=function(i,s){return i&&t(this,"emit",arguments),this._subscribers&&Object.keys(this._subscribers).forEach(function(s){(!i||s!=i&&e(s,i))&&t(this,"emit",[s,this.get(s)])},this),this},this.persist=function(){return this._storageKey&&localStorage.setItem(this._storageKey,JSON.stringify(this._data)),this}});'),jsio.setCachedSrc("../node_modules/squill/models/bindings.js",'var RE_BINDING=/(^|[^%])%\\((.*?)\\)([ +0-]?)(\\d*)(\\.?\\d*)([dfcs])/g;exports.parseFormat=function(t,s){var e=[];s.replace(RE_BINDING,function(t,s,i,n,h,u,_,a){e.push({index:a+s.length,endIndex:a+t.length,key:i,pad:n||" ",minLength:parseInt(h),decimal:parseInt(u.substring(1)),type:_,value:""})}),e.reverse(),new Binding(t,null,s,e)},exports.parseData=function(t,s){new Binding(t,s)};var Binding=Class(function(){this.init=function(t,s,e,i){var n=t.getOpts().__result,h=n&&n.getTarget()||t;this._widget=t,this._key=s,this._src=e,this._subs=i,this._connect(h.getModel()),t.on("change",bind(this,"_updateModel")),h.on("model",bind(this,"_connect"))},this._connect=function(t){this._model&&this._disconnect(),this._model=t,this._subs?(this._subs.forEach(function(s){s.value=t.get(s.key),t.subscribe(s.key,this,"_update",s.key)},this),this._update()):this._key&&(t.subscribe(this._key,this,"_updateKey"),this._updateKey(t.get(this._key)))},this._disconnect=function(){var t=this._model;this._subs&&this._subs.forEach(function(s){t.unsubscribe(s.key,this)},this),this._key&&t.unsubscribe(this._key,this)},this._update=function(t,s){var e=this._src;this._subs.forEach(function(i){t&&i.key==t&&(i.value=s),e=e.substring(0,i.index)+i.value+e.substring(i.endIndex)},this),this._widget.setData(e)},this._updateKey=function(t){this._widget.setData(t)},this._updateModel=function(t){this._model&&this._key&&this._model.set(this._key,t)}});'),jsio.setCachedSrc("../node_modules/squill/__imports__.js",'exports.classes={alpha:".Alpha",label:".Label",list:".List",button:".TextButton",text:".TextInput",textarea:".TextArea",password:".TextInput",scroller:".Scroller",canvas:".Canvas",checkbox:".CheckBox",menu:".Menu",slider:".Slider",color:".Color",vcenter:".VerticalCenter",treelist:".TreeList",graph:".Graph",select:".SelectBox",widget:".Widget"},exports.resolve=function(e,t){var r=[];if("browser"==e)for(var s in exports.classes)r.push(exports.classes[s]);return r};'),jsio.setCachedSrc("../node_modules/squill/jscolor/jscolor.js",'var jscolor={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()},getDir:function(){return jscolor.dir="images/colorpicker/",jscolor.dir},detectDir:function(){for(var e=location.href,t=document.getElementsByTagName("base"),o=0;o<t.length;o+=1)t[o].href&&(e=t[o].href);for(var t=document.getElementsByTagName("script"),o=0;o<t.length;o+=1)if(t[o].src&&/(^|\\/)jscolor\\.js([?#].*)?$/i.test(t[o].src)){var r=new jscolor.URI(t[o].src),s=r.toAbsolute(e);return s.path=s.path.replace(/[^\\/]+$/,""),s.query=null,s.fragment=null,s.toString()}return!1},bind:function(e){e.color=new jscolor.color(e,{})},preload:function(){for(var e in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(e)&&jscolor.loadImage(e)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(e){jscolor.imgRequire[e]=!0},loadImage:function(e){jscolor.imgLoaded[e]||(jscolor.imgLoaded[e]=new Image,jscolor.imgLoaded[e].src=jscolor.getDir()+e)},fetchElement:function(e){return"string"==typeof e?document.getElementById(e):e},addEvent:function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)},fireEvent:function(e,t){if(e)if(document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent(t,!0,!0),e.dispatchEvent(o)}else if(document.createEventObject){var o=document.createEventObject();e.fireEvent("on"+t,o)}else e["on"+t]&&e["on"+t]()},getElementPos:function(e){var t=e,o=e,r=0,s=0;if(t.offsetParent)do r+=t.offsetLeft,s+=t.offsetTop;while(t=t.offsetParent);for(;(o=o.parentNode)&&"BODY"!==o.nodeName.toUpperCase();)r-=o.scrollLeft,s-=o.scrollTop;return[r,s]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getRelMousePos:function(e){var t=0,o=0;return e||(e=window.event),"number"==typeof e.offsetX?(t=e.offsetX,o=e.offsetY):"number"==typeof e.layerX&&(t=e.layerX,o=e.layerY),{x:t,y:o}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(e){function t(e){for(var t="";e;)if("../"===e.substr(0,3)||"./"===e.substr(0,2))e=e.replace(/^\\.+/,"").substr(1);else if("/./"===e.substr(0,3)||"/."===e)e="/"+e.substr(3);else if("/../"===e.substr(0,4)||"/.."===e)e="/"+e.substr(4),t=t.replace(/\\/?[^\\/]*$/,"");else if("."===e||".."===e)e="";else{var o=e.match(/^\\/?[^\\/]*/)[0];e=e.substr(o.length),t+=o}return t}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(e){var t=e.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\\/\\/)([^\\/?#]*))?([^?#]*)((\\?)([^#]*))?((#)(.*))?/);return this.scheme=t[3]?t[2]:null,this.authority=t[5]?t[6]:null,this.path=t[7],this.query=t[9]?t[10]:null,this.fragment=t[12]?t[13]:null,this},this.toString=function(){var e="";return null!==this.scheme&&(e=e+this.scheme+":"),null!==this.authority&&(e=e+"//"+this.authority),null!==this.path&&(e+=this.path),null!==this.query&&(e=e+"?"+this.query),null!==this.fragment&&(e=e+"#"+this.fragment),e},this.toAbsolute=function(e){var e=new jscolor.URI(e),o=this,r=new jscolor.URI;return null===e.scheme?!1:(null!==o.scheme&&o.scheme.toLowerCase()===e.scheme.toLowerCase()&&(o.scheme=null),null!==o.scheme?(r.scheme=o.scheme,r.authority=o.authority,r.path=t(o.path),r.query=o.query):(null!==o.authority?(r.authority=o.authority,r.path=t(o.path),r.query=o.query):(""===o.path?(r.path=e.path,null!==o.query?r.query=o.query:r.query=e.query):("/"===o.path.substr(0,1)?r.path=t(o.path):(null!==e.authority&&""===e.path?r.path="/"+o.path:r.path=e.path.replace(/[^\\/]+$/,"")+o.path,r.path=t(r.path)),r.query=o.query),r.authority=e.authority),r.scheme=e.scheme),r.fragment=o.fragment,r)},e&&this.parse(e)},color:function(target,prop){function RGB_HSV(e,t,o){var r=Math.min(Math.min(e,t),o),s=Math.max(Math.max(e,t),o),l=s-r;if(0===l)return[null,0,s];var n=e===r?3+(o-t)/l:t===r?5+(e-o)/l:1+(t-e)/l;return[6===n?0:n,l/s,s]}function HSV_RGB(e,t,o){if(null===e)return[o,o,o];var r=Math.floor(e),s=r%2?e-r:1-(e-r),l=o*(1-t),n=o*(1-t*s);switch(r){case 6:case 0:return[o,n,l];case 1:return[n,o,l];case 2:return[l,o,n];case 3:return[l,n,o];case 4:return[n,l,o];case 5:return[o,l,n]}}function removePicker(){delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function drawPicker(e,t){function o(){var e=THIS.pickerInsetColor.split(/\\s+/),t=e.length<2?e[0]:e[1]+" "+e[0]+" "+e[0]+" "+e[1];n.btn.style.borderColor=t}if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(THIS.pickerCloseText)};for(var r=0,s=4;r<jscolor.images.sld[1];r+=s){var l=document.createElement("div");l.style.height=s+"px",l.style.fontSize="1px",l.style.lineHeight="0",jscolor.picker.sld.appendChild(l)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var n=jscolor.picker;n.box.onmouseup=n.box.onmouseout=function(){target.focus()},n.box.onmousedown=function(){abortBlur=!0},n.box.onmousemove=function(e){(holdPad||holdSld)&&(holdPad&&setPad(e),holdSld&&setSld(e),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),dispatchImmediateChange())},n.padM.onmouseup=n.padM.onmouseout=function(){holdPad&&(holdPad=!1,jscolor.fireEvent(valueElement,"change"))},n.padM.onmousedown=function(e){holdPad=!0,setPad(e),dispatchImmediateChange()},n.sldM.onmouseup=n.sldM.onmouseout=function(){holdSld&&(holdSld=!1,jscolor.fireEvent(valueElement,"change"))},n.sldM.onmousedown=function(e){holdSld=!0,setSld(e),dispatchImmediateChange()};var i=getPickerDims(THIS);n.box.style.width=i[0]+"px",n.box.style.height=i[1]+"px",n.boxB.style.position="absolute",n.boxB.style.clear="both",n.boxB.style.left=e+"px",n.boxB.style.top=t+"px",n.boxB.style.zIndex=THIS.pickerZIndex,n.boxB.className="colorMenu",n.pad.style.width=jscolor.images.pad[0]+"px",n.pad.style.height=jscolor.images.pad[1]+"px",n.padB.style.position="absolute",n.padB.style.left=THIS.pickerFace+"px",n.padB.style.top=THIS.pickerFace+"px",n.padB.style.border=THIS.pickerInset+"px solid",n.padB.style.borderColor=THIS.pickerInsetColor,n.padM.style.position="absolute",n.padM.style.left="0",n.padM.style.top="0",n.padM.style.width=THIS.pickerFace+2*THIS.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",n.padM.style.height=n.box.style.height,n.padM.style.cursor="crosshair",n.sld.style.overflow="hidden",n.sld.style.width=jscolor.images.sld[0]+"px",n.sld.style.height=jscolor.images.sld[1]+"px",n.sldB.style.display=THIS.slider?"block":"none",n.sldB.style.position="absolute",n.sldB.style.right=THIS.pickerFace+"px",n.sldB.style.top=THIS.pickerFace+"px",n.sldB.style.border=THIS.pickerInset+"px solid",n.sldB.style.borderColor=THIS.pickerInsetColor,n.sldM.style.display=THIS.slider?"block":"none",n.sldM.style.position="absolute",n.sldM.style.right="0",n.sldM.style.top="0",n.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+THIS.pickerFace+2*THIS.pickerInset+"px",n.sldM.style.height=n.box.style.height;try{n.sldM.style.cursor="pointer"}catch(a){n.sldM.style.cursor="hand"}n.btn.style.display=THIS.pickerClosable?"block":"none",n.btn.style.position="absolute",n.btn.style.left=THIS.pickerFace+"px",n.btn.style.bottom=THIS.pickerFace+"px",n.btn.style.padding="0 15px",n.btn.style.height="18px",n.btn.style.border=THIS.pickerInset+"px solid",o(),n.btn.style.color=THIS.pickerButtonColor,n.btn.style.font="12px sans-serif",n.btn.style.textAlign="center";try{n.btn.style.cursor="pointer"}catch(a){n.btn.style.cursor="hand"}switch(n.btn.onmousedown=function(){THIS.hidePicker()},n.btnS.style.lineHeight=n.btn.style.height,modeID){case 0:var c="hs.png";break;case 1:var c="hv.png"}n.padM.style.backgroundImage="url(\'"+jscolor.getDir()+"cross.gif\')",n.padM.style.backgroundRepeat="no-repeat",n.sldM.style.backgroundImage="url(\'"+jscolor.getDir()+"arrow.gif\')",n.sldM.style.backgroundRepeat="no-repeat",n.pad.style.backgroundImage="url(\'"+jscolor.getDir()+c+"\')",n.pad.style.backgroundRepeat="no-repeat",n.pad.style.backgroundPosition="0 0",redrawPad(),redrawSld(),jscolor.picker.owner=THIS,document.getElementsByTagName("body")[0].appendChild(n.boxB)}function getPickerDims(e){var t=[2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[0]+(e.slider?2*e.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),e.pickerClosable?4*e.pickerInset+3*e.pickerFace+jscolor.images.pad[1]+e.pickerButtonHeight:2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[1]];return t}function redrawPad(){switch(modeID){case 0:var e=1;break;case 1:var e=2}var t=Math.round(THIS.hsv[0]/6*(jscolor.images.pad[0]-1)),o=Math.round((1-THIS.hsv[e])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=THIS.pickerFace+THIS.pickerInset+t-Math.floor(jscolor.images.cross[0]/2)+"px "+(THIS.pickerFace+THIS.pickerInset+o-Math.floor(jscolor.images.cross[1]/2))+"px";var r=jscolor.picker.sld.childNodes;switch(modeID){case 0:for(var s=HSV_RGB(THIS.hsv[0],THIS.hsv[1],1),l=0;l<r.length;l+=1)r[l].style.backgroundColor="rgb("+s[0]*(1-l/r.length)*100+"%,"+s[1]*(1-l/r.length)*100+"%,"+s[2]*(1-l/r.length)*100+"%)";break;case 1:var s,n,i=[THIS.hsv[2],0,0],l=Math.floor(THIS.hsv[0]),a=l%2?THIS.hsv[0]-l:1-(THIS.hsv[0]-l);switch(l){case 6:case 0:s=[0,1,2];break;case 1:s=[1,0,2];break;case 2:s=[2,0,1];break;case 3:s=[2,1,0];break;case 4:s=[1,2,0];break;case 5:s=[0,2,1]}for(var l=0;l<r.length;l+=1)n=1-1/(r.length-1)*l,i[1]=i[0]*(1-n*a),i[2]=i[0]*(1-n),r[l].style.backgroundColor="rgb("+100*i[s[0]]+"%,"+100*i[s[1]]+"%,"+100*i[s[2]]+"%)"}}function redrawSld(){switch(modeID){case 0:var e=2;break;case 1:var e=1}var t=Math.round((1-THIS.hsv[e])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(THIS.pickerFace+THIS.pickerInset+t-Math.floor(jscolor.images.arrow[1]/2))+"px"}function isPickerOwner(){return jscolor.picker&&jscolor.picker.owner===THIS}function blurTarget(){valueElement===target&&THIS.importColor(),THIS.pickerOnfocus&&THIS.hidePicker()}function blurValue(){valueElement!==target&&THIS.importColor()}function setPad(e){var t=jscolor.getRelMousePos(e),o=t.x-THIS.pickerFace-THIS.pickerInset,r=t.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(o*(6/(jscolor.images.pad[0]-1)),1-r/(jscolor.images.pad[1]-1),null,leaveSld);break;case 1:THIS.fromHSV(o*(6/(jscolor.images.pad[0]-1)),null,1-r/(jscolor.images.pad[1]-1),leaveSld)}}function setSld(e){var t=jscolor.getRelMousePos(e),o=t.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(null,null,1-o/(jscolor.images.sld[1]-1),leavePad);break;case 1:THIS.fromHSV(null,1-o/(jscolor.images.sld[1]-1),null,leavePad)}}function dispatchImmediateChange(){THIS.onImmediateChange&&("string"==typeof THIS.onImmediateChange?eval(THIS.onImmediateChange):THIS.onImmediateChange(THIS))}this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=target,this.styleElement=target,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4;for(var p in prop)prop.hasOwnProperty(p)&&(this[p]=prop[p]);this.hidePicker=function(){isPickerOwner()&&removePicker()},this.showPicker=function(){if(!isPickerOwner()){var e,t,o,r=jscolor.getElementPos(target),s=jscolor.getElementSize(target),l=jscolor.getViewPos(),n=jscolor.getViewSize(),i=getPickerDims(this);switch(this.pickerPosition.toLowerCase()){case"left":e=1,t=0,o=-1;break;case"right":e=1,t=0,o=1;break;case"top":e=0,t=1,o=-1;break;default:e=0,t=1,o=1}var a=(s[t]+i[t])/2;if(this.pickerSmartPosition)var c=[-l[e]+r[e]+i[e]>n[e]&&-l[e]+r[e]+s[e]/2>n[e]/2&&r[e]+s[e]-i[e]>=0?r[e]+s[e]-i[e]:r[e],-l[t]+r[t]+s[t]+i[t]-a+a*o>n[t]?-l[t]+r[t]+s[t]/2>n[t]/2&&r[t]+s[t]-a-a*o>=0?r[t]+s[t]-a-a*o:r[t]+s[t]-a+a*o:r[t]+s[t]-a+a*o>=0?r[t]+s[t]-a+a*o:r[t]+s[t]-a-a*o];else var c=[r[e],r[t]+s[t]-a+a*o];drawPicker(c[e],c[t])}},this.importColor=function(){valueElement?this.adjust?!this.required&&/^\\s*$/.test(valueElement.value)?(valueElement.value="",styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor,styleElement.style.color=styleElement.jscStyle.color,this.exportColor(leaveValue|leaveStyle)):this.fromString(valueElement.value)||this.exportColor():this.fromString(valueElement.value,leaveValue)||(styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor,styleElement.style.color=styleElement.jscStyle.color,this.exportColor(leaveValue|leaveStyle)):this.exportColor()},this.exportColor=function(e){if(!(e&leaveValue)&&valueElement){var t=this.toString();this.caps&&(t=t.toUpperCase()),this.hash&&(t="#"+t),valueElement.value=t}e&leaveStyle||!styleElement||(styleElement.style.backgroundColor="#"+this.toString(),styleElement.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),e&leavePad||!isPickerOwner()||redrawPad(),e&leaveSld||!isPickerOwner()||redrawSld()},this.fromHSV=function(e,t,o,r){0>e&&(e=0)||e>6&&(e=6),0>t&&(t=0)||t>1&&(t=1),0>o&&(o=0)||o>1&&(o=1),this.rgb=HSV_RGB(null===e?this.hsv[0]:this.hsv[0]=e,null===t?this.hsv[1]:this.hsv[1]=t,null===o?this.hsv[2]:this.hsv[2]=o),this.exportColor(r)},this.fromRGB=function(e,t,o,r){0>e&&(e=0)||e>1&&(e=1),0>t&&(t=0)||t>1&&(t=1),0>o&&(o=0)||o>1&&(o=1);var s=RGB_HSV(null===e?this.rgb[0]:this.rgb[0]=e,null===t?this.rgb[1]:this.rgb[1]=t,null===o?this.rgb[2]:this.rgb[2]=o);null!==s[0]&&(this.hsv[0]=s[0]),0!==s[2]&&(this.hsv[1]=s[1]),this.hsv[2]=s[2],this.exportColor(r)},this.fromString=function(e,t){var o=e.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i);return o?(6===o[1].length?this.fromRGB(parseInt(o[1].substr(0,2),16)/255,parseInt(o[1].substr(2,2),16)/255,parseInt(o[1].substr(4,2),16)/255,t):this.fromRGB(parseInt(o[1].charAt(0)+o[1].charAt(0),16)/255,parseInt(o[1].charAt(1)+o[1].charAt(1),16)/255,parseInt(o[1].charAt(2)+o[1].charAt(2),16)/255,t),!0):!1},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var THIS=this,modeID="hvs"===this.pickerMode.toLowerCase()?1:0,abortBlur=!1,valueElement=jscolor.fetchElement(this.valueElement),styleElement=jscolor.fetchElement(this.styleElement),holdPad=!1,holdSld=!1,leaveValue=1,leaveStyle=2,leavePad=4,leaveSld=8;if(jscolor.addEvent(target,"focus",function(){THIS.pickerOnfocus&&THIS.showPicker()}),jscolor.addEvent(target,"blur",function(){abortBlur?abortBlur=!1:window.setTimeout(function(){abortBlur||blurTarget(),abortBlur=!1},0)}),valueElement){var updateField=function(){THIS.fromString(valueElement.value,leaveValue),dispatchImmediateChange()};jscolor.addEvent(valueElement,"keyup",updateField),jscolor.addEvent(valueElement,"input",updateField),jscolor.addEvent(valueElement,"blur",blurValue),valueElement.setAttribute("autocomplete","off")}switch(styleElement&&(styleElement.jscStyle={backgroundColor:styleElement.style.backgroundColor,color:styleElement.style.color}),modeID){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}};exports=jscolor;'),
jsio.setCachedSrc("../node_modules/squill/Label.js",'jsio("from util.browser import $"),jsio("import squill.Widget"),jsio("import squill.models.bindings as bindings"),exports=Class(squill.Widget,function(){this._css="label",this._def={children:[{id:"_labelSpan",tag:"span"}]},this.buildWidget=function(){this.setLabel(this.getI18n("label"));var t=this._opts;t.format&&bindings.parseFormat(this,t.format)},this.setData=this.setValue=this.setLabel=this.setText=function(t){/object/i.test(t),$.setText(this._labelSpan,t)},this.setHTML=function(t){this._labelSpan.innerHTML=t}});'),jsio.setCachedSrc("../node_modules/squill/List.js",'jsio("import .Window"),jsio("import .Widget"),jsio("from util.browser import $"),jsio("import .models.DataSource as DataSource"),jsio("import .Selection");var List=exports=Class(Widget,function(t){this._css="list",this.init=function(e){e=merge(e,{containSelf:!0,cellSpacing:0,isTiled:!1,preserveCells:!1,renderAll:!0,isFixedHeight:!0,absolutePosition:!0,filter:null}),this.needsRender=delay(this.render),e.cellCtor&&this.setCellCtor(e.cellCtor),e.dataSource&&this.setDataSource(e.dataSource),e.sorter&&this.setSorter(e.sorter),this._lastFilter=null,this._filter=e.filter,this._cellsByID={},this._removed={},this._containSelf=e.containSelf,this._containerTag=e.containerTag,this._applyNodeOrder=e.applyNodeOrder,this._renderOpts={cellSpacing:e.cellSpacing||0},this.updateFilter=delay(function(){this._lastFilter=null,this.needsRender()},100),t(this,"init",[e]),e.__result&&e.__result.addSubscription(this,"select"),Window.get().on("ViewportChange",bind(this,"needsRender"))},this.getContainer=function(){return this._container},this.getDataSource=function(){return this._dataSource},this.setModel=function(e,i){return 1!=arguments.length?t(this,"setModel",arguments):void this.setDataSource(arguments[0])},this.setData=function(t){if(this._dataSource?this._dataSource.clear():this.setDataSource(new DataSource({sorter:this._sorter})),t){var e;e=Array.isArray(t)?t.map(function(t,e){return{id:e,data:t}}):Object.keys(t).map(function(e){return{id:e,data:t[e]}}),this._dataSource.add(e)}this.needsRender()},this.setDataSource=function(t){this._dataSource!=t&&(this._dataSource&&(this._dataSource.unsubscribe("Update",this),this._dataSource.unsubscribe("Remove",this),this.clear()),this._dataSource=t,this._dataSource.subscribe("Update",this,"onUpdateItem"),this._dataSource.subscribe("Remove",this,"onRemoveItem"),this.needsRender())},this.onUpdateItem=function(t,e){var i=this._cellsByID[t];i&&i.getItem()!=e&&i.setItem(e),this.updateFilter()},this.onRemoveItem=function(t){this._removed[t]=!0,this.updateFilter()},this.buildWidget=function(){this._container=$({parent:this._el,className:this._opts.containerClassName,tag:this._containerTag||"div"}),this._containSelf&&!this._applyNodeOrder&&(this._container.style.position="relative"),(this._opts.selection||this._opts.selectable)&&this.setSelectable(this._opts.selection||this._opts.selectable),this.render()},this.setValue=function(t){this.selection&&this.selection.select(t)},this.getValue=function(){return this.selection?this.selection.get():void 0},this.setSelectable=function(t){this.selection=new Selection({parent:this,type:t}).subscribe("Select",this,"_onSelected",!0).subscribe("Deselect",this,"_onSelected",!1),this.selection},this._onSelected=function(t,e,i){void 0!==this._cellsByID[i]&&(this._cellsByID[i].updateSelected(),t&&this.publish("select",i,e))},this.setCellCtor=function(t){t!=this._cellCtor&&(this._cellCtor=t,this.clear())},this.clear=function(){for(var t in this._cellsByID){var e=this._cellsByID[t];e.remove()}this._cellsByID={},this._renderedDataSource=null,this._cellDim=null},this.getCell=this.getCellById=function(t){return this._cellsByID[t]},this.setCell=this.setCellForId=function(t,e){this._cellsByID[t]=e},this.getCells=function(){return this._cellsByID},this.setSorter=function(t){this._sorter=t,this._renderedDataSource&&this._renderedDataSource.setSorter(t)},this.setFilter=function(t){this._filter=t,this.needsRender()},this.setFixedHeight=function(t){this._opts.isFixedHeight=t},this._applyDataSource=function(){if(this._filter!=this._lastFilter)this._lastFilter=this._filter,this._renderedDataSource=this._dataSource.getFilteredDataSource(bind(this,this._filter)),this._lastSorter=this._sorter,this._renderedDataSource.setSorter(this._sorter);else if(this._sorter!=this._lastSorter){if(!this._renderedDataSource||this._renderedDataSource==this._dataSource)return this._filter=function(){return!0},this._applyDataSource();this._lastSorter=this._sorter,this._renderedDataSource.setSorter(this._sorter)}this._renderedDataSource||(this._renderedDataSource=this._dataSource)},this.onShow=function(){t(this,"onShow",arguments),this.needsRender()},this.render=function(){this._dataSource&&(this._applyDataSource(),this._renderedDataSource.sort(),this._opts.renderAll?this.renderAllDelayed():this._opts.isFixedHeight?this.renderFixedHeight():this.renderDynamicHeight(),this._removed={})},this.setCellDim=function(t){this._cellDim=t},this.getCellDim=function(){if(this._cellDim)return this._cellDim;if(this._opts.isFixedHeight){var t=this._renderedDataSource.getItemForIndex(0);if(!t)return!1;var e=t[this._renderedDataSource.getKey()],i=this._cellsByID[e]||(this._cellsByID[e]=this._createCell(t)),s=$.size(i.getElement());if(0==s.width||0==s.height)return null;var r=this._opts.cellSpacing;return r&&(s.width+=r,s.height+=r),this._cellDim=s,s}throw"unimplemented"},this._createCell=function(t){var e=this._dataSource.getKey(),i=new this._cellCtor({parent:this,controller:this,key:e,item:t});return i.getElement().setAttribute("squill-data-id",t[e]),i.render(),i},this._nodeOrder=function(){var t,e,i,s,r,o=this._container,n=this._renderedDataSource,h=n.key;if(o.childNodes.length){for(t=document.createElement("div"),o.insertBefore(t,o.childNodes[0]),r=0;r<n.length;r++)s=n.getItemForIndex(r),e=this._cellsByID[s[h]],i=e.getElement(),e&&i.parentNode&&o.insertBefore(o.removeChild(i),t);o.removeChild(t)}},this.renderAllDelayed=function(){function t(){var t=i.getItemForIndex(s);if(!t)return!1;var e=t[i.getKey()],r=this._cellsByID[e];return r?r.render():r=this._cellsByID[e]=this._createCell(t),!this._applyNodeOrder&&this.positionCell(r,s),++s,!0}function e(){this._renderManyTimeout&&(clearTimeout(this._renderManyTimeout),this._renderManyTimeout=void 0);for(var i=50,s=0,r=+new Date;s++<10||+new Date-r<i;)if(!t.call(this))return void(this._applyNodeOrder&&this._nodeOrder());this._renderManyTimeout=setTimeout(bind(this,e),100)}var i=this._renderedDataSource;if(i){this.updateRenderOpts();var s=0,r=this._removed;for(var o in r)if(!i.getItemForID(o)){var n=this._cellsByID[o];n&&(n.remove(),delete this._cellsByID[o])}e.call(this)}},this.setOffsetParent=function(t){this._opts.offsetParent=t},this.setTiled=function(t){this._opts.isTiled=t,this._isTiled=t},this.updateRenderOpts=function(){var t=this._renderOpts;t.offsetTop=this._containSelf?0:this._container.offsetTop,t.offsetLeft=this._containSelf?0:this._container.offsetLeft;var e=this._offsetParent||this.getOffsetParent();if(t.top=(e.getAttribute("squill-scroller-top")||e.scrollTop)-t.offsetTop,t.height=e.offsetHeight,t.bottom=t.top+t.height,this._opts.isFixedHeight){var i=this.getCellDim();if(!i)return!1;t.cellWidth=i.width,t.cellHeight=i.height}var s=t.numRows=this._renderedDataSource.length;return this._opts.isFixedHeight&&(this._opts.isTiled?(t.maxWidth=e.offsetWidth-t.offsetLeft,t.numPerRow=Math.max(1,t.maxWidth/t.cellWidth|0),t.numRows=Math.ceil(s/t.numPerRow),t.start=Math.max(0,(t.top/t.cellHeight|0)*t.numPerRow),t.end=Math.ceil(t.bottom/t.cellHeight)*t.numPerRow):(t.start=Math.max(0,t.top/t.cellHeight|0),t.end=t.bottom/t.cellHeight+1|0)),this._applyNodeOrder||(this._opts.absolutePosition?this._container.style.height=t.numRows*t.cellHeight+"px":this._container.style.height="auto"),!0},this.positionCell=function(t,e){if(this._opts.absolutePosition){var i,s,r=this._renderOpts,o=t.getElement();this._opts.isTiled?(i=e%r.numPerRow,s=e/r.numPerRow|0,o.style.left=i*r.cellWidth+r.offsetLeft+"px",o.style.top=s*r.cellHeight+r.offsetTop+"px"):o.style.top=(e*r.cellHeight||0)+r.offsetTop+"px"}},this.getOffsetParent=function(){return this._opts.offsetParent||(this._containSelf?this._container:this._container.offsetParent)||document.body},this.renderFixedHeight=function(){var t=this.getOffsetParent();if(t){t!=this._offsetParent&&(this._removeScrollEvt&&this._removeScrollEvt(),this._offsetParent=t,this._removeScrollEvt=$.onEvent(t,"scroll",this,"needsRender"));var e=this._renderedDataSource,i=e.getKey(),s=e.length;if(!s||this.updateRenderOpts()){var r=this._cellsByID;if(this._cellsByID={},s)for(var o=(this._isTiled,this._renderOpts),n=o.start;n<o.end;++n){var h=e.getItemForIndex(n);if(!h)break;var l=h[i],a=r[l];a?(delete r[l],a.render()):a=this._createCell(h),this.positionCell(a,n),this._cellsByID[l]=a}if(this._opts.preserveCells)for(var l in r){var a=r[l];e.getItemForID(l)?this._cellsByID[l]=a:a.remove()}else for(var l in r)r[l].remove()}}}});'),jsio.setCachedSrc("../node_modules/squill/Window.js",'jsio("import lib.PubSub"),jsio("import std.uri"),jsio("from util.browser import $");var UNIQUE_ID="__squill__window_id",Window=exports=Class(lib.PubSub,function(){this.init=function(i){this._win=i||window,this._location=new std.uri(this._win.location),this._dim=$(this._win),$.onEvent(this._win,"resize",this,"onViewportChange"),$.onEvent(this._win,"scroll",this,"onViewportChange")},this.onViewportChange=function(i){this._dim=$(this._win),this.publish("ViewportChange",i,this._dim)},this.getDim=this.getViewport=function(){return this._dim},this.query=function(i){return this._location.query(i)},this.hash=function(i){return this._location.query(i)},this.center=function(i,t){t=merge(t,{subscribe:!0});var n="width"in t?t.width:i.offsetWidth,s="height"in t?t.height:i.offsetHeight;i.style.left=(this._dim.width-n)/2+"px",i.style.top=(this._dim.height-s)/2+"px",t.subscribe&&this.subscribe("ViewportChange",this,"center",i,merge({subscribe:!1},t))}}),gWin={};exports.get=function(i){return i||(i=window),i[UNIQUE_ID]?gWin[i[UNIQUE_ID]]:gWin[i[UNIQUE_ID]]=new Window(i)};'),jsio.setCachedSrc("../node_modules/jsio/packages/std/uri.js",'jsio("import util.path");var attrs=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],URI=module.exports=Class(function(){this.init=function(t,r){if(t instanceof URI)for(var e,i=0;e=attrs[i];++i)this["_"+e]=t["_"+e];else{this._isStrict=r;var s=URI.parse(t,r);for(var e in s)this["_"+e]=s[e]}};for(var t,r=0;t=attrs[r];++r)(function(t){var r=t.charAt(0).toUpperCase()+t.slice(1);this["get"+r]=function(){return this["_"+t]},this["set"+r]=function(r){return this["_"+t]=r,this}}).call(this,t);this.query=function(t){return URI.parseQuery(this._query)[t]},this.hash=function(t){return URI.parseQuery(this._anchor)[t]},this.addHash=function(t){var r=URI.parseQuery(this._anchor);for(var e in t)r[e]=t[e];return this._anchor=URI.buildQuery(r),this},this.setPath=function(t){var r=util.path.splitPath(t);return this._file=r.filename,this._directory=r.directory,this._path=t,this},this.setFile=function(t){return this.setPath(util.path.join(this._directory,t))},this.setDirectory=function(t){return this.setPath(util.path.join(t,this._file))},this.push=function(t){return t&&(this._path=(this._path+"/"+t).replace(/\\/\\/+/g,"/")),this},this.addQuery=function(t){var r=URI.parseQuery(this._query);for(var e in t)r[e]=t[e];return this._query=URI.buildQuery(r),this},this.removeQuery=function(t){var r=URI.parseQuery(this._query);if(Array.isArray(t))for(var e=0,i=t.length;i>e;++e)delete r[t[e]];else delete r[t];return this._query=URI.buildQuery(r),this},this.toJSON=function(){return this.toString(!1)},this.toString=function(t){var r=this._protocol?this._protocol+"://":"",e=this._host?this._host+(80==(this._port||80)?"":":"+this._port):"";if(t)return r+e;var i=this._path,s=this._query?"?"+this._query:"",o=this._anchor?"#"+this._anchor:"";return r+e+i+s+o}});URI.relativeTo=function(t,r){var t=String(t);if(r&&!/^http(s?):\\/\\//.test(t)){var e=new URI(r).setAnchor("").setQuery("").setFile("").toString("/"==t.charAt(0));t=URI.resolveRelative(e+t)}return new URI(t)},URI.resolveRelative=function(t){for(var r;(r=t)!=(t=t.replace(/(^|\\/)([^\\/]+)\\/\\.\\.\\//g,"/")););return t.replace(/[^.]\\.\\//g,"")},URI.buildQuery=function(t){var r=[];for(var e in t)r.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return r.join("&")},URI.parseQuery=function(t){for(var r=t.split("&"),e=r.length,i={},s=0;e>s;++s){var o=r[s].split("="),n=decodeURIComponent(o[0]);n&&(i[n]=decodeURIComponent(o[1]))}return i};var strictRegex=/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,looseRegex=/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/,queryStringRegex=/(?:^|&)([^&=]*)=?([^&]*)/g;URI.parse=function(t,r){for(var e,i=r?strictRegex:looseRegex,s={},o=i.exec(t),n=0;e=attrs[n];++n)s[e]=o[n]||"";var h=s.queryKey={};return s.query.replace(queryStringRegex,function(t,r,e){t&&(h[r]=e)}),s},URI.isSameDomain=function(t,r){var e=URI.parse(t),i=URI.parse(r);return e.port==i.port&&e.host==i.host&&e.protocol==i.protocol};'),jsio.setCachedSrc("../node_modules/squill/models/DataSource.js",'jsio("import lib.Callback"),jsio("import .BasicDataSource as BasicDataSource");var DataSource=exports=Class(BasicDataSource,function(t){var e={key:"id"};this.init=function(i){this._opts=i=merge(i,e),t(this,"init",[i]),this._byIndex=[],this._byID={},this._ctor=i.ctor,this._reverse=i.reverse,this.length=0,this.onLoad=new lib.Callback,this.setSorter(i.sorter),this.setPersistence(i.persistence),this._changeDataSave=!1,this._changeData={updated:[],updatedHash:{},removed:[],removedHash:{}}},this.setPersistence=function(t){this._persistence=t,t&&(this.onLoad.clear(),t.load(this,this.onLoad.chain()))},this._saveChanges=function(t,e){this._changeDataSave&&!this._changeData[t+"Hash"][e]&&(this._changeData[t+"Hash"][e]=!0,this._changeData[t].push(e))},this.getFilteredDataSource=function(t){var e=new DataSource(this._opts);return this.forEach(function(i){t(i)&&e.add(i)}),this.subscribe("Update",function(i,s){t(s)?e.add(s):e.remove(s)}),this.subscribe("Remove",function(t,i){e.remove(i)}),e},this.signalUpdate=function(t,e,i){if(void 0!==e[this.key])switch(t){case"UPDATE":this._saveChanges("updated",e[this.key]),this.publish("Update",e[this.key],e);break;case"REMOVE":this._saveChanges("removed",e[this.key]),this.publish("Remove",i,e)}};var i=function(){return this._sortKey};this.updated=this.add=function(t){if(isArray(t)){for(var e=[],s=0,n=t.length;n>s;++s)if(t[s]){var h=this.add(t[s]);h&&e.push(h)}return e}var r=t[this.key];if(null!=r){var a=null;if(this._byID[r]){for(var o,s=0;o=this._byIndex[s];++s)if(o[this.key]==r){"function"==typeof o.update?(o.update(t),t=o):a=s;break}}else a=this.length++;return null!==a&&(!this._ctor||t instanceof this._ctor||(t=new this._ctor(t)),this._byIndex[a]=t),this._byID[r]=t,this.signalUpdate("UPDATE",t),this._sorter&&(t._sortKey=this._sorter(t),t.toString=i),t}},this.remove=function(t){if("object"==typeof t&&(t=t[this.key]),null!=t&&this._byID[t]){this.signalUpdate("REMOVE",this._byID[t],t),delete this._byID[t];for(var e,i=0;e=this._byIndex[i];++i)if(e[this.key]==t)return--this.length,this._byIndex.splice(i,1)[0]}},this.keepOnly=function(t){this.compare(t,function(t,e,i){i||t.remove(e)})},this.clear=function(){var t=this._byIndex;this._byIndex=[],this._byID={},this.length=0;for(var e,i=0;e=t[i];++i)this.signalUpdate("REMOVE",e,e[this.key])},this.getCount=function(){return this.length},this.setSorter=function(t){if(this._sorter=t,t)for(var e,s=0;e=this._byIndex[s];++s)e._sortKey=t(e),e.toString=i;return this.sort(),this},this.getIDs=function(){return this._byIndex.map(function(t){return t[this.key]},this)},this.contains=function(t){return!!this._byID[t]},this.getKey=function(){return this.key},this.get=this.getItemForID=function(t){return this._byID[t]||null},this.indexOf=function(t){return this._byIndex.indexOf(t)},this.getItemForIndex=function(t){return this._byIndex[t]},this.sort=function(){this._byIndex.sort(),this._reverse&&this._byIndex.reverse()},this.forEach=this.each=function(t,e){for(var i=0;i<this.length;++i)if(t.call(e,this._byIndex[i],i))return},this.toJSON=function(){return{key:this.key,items:this._byIndex}},this.fromJSON=function(t){this.clear();this.key=t.key;this.add(t.items)},this.toArray=function(){return this._byIndex.slice(0)},this.beginChanges=function(){this._changeDataSave=!0,this._changeData={updated:[],updatedHash:{},removed:[],removedHash:{}}},this.saveChanges=function(){if(this._changeDataSave=!1,this._persistence){var t,e,i=this._changeData;if(this._persistence.remove(i.removed),i.updated.length){var s=[];for(t=0,e=i.updated.length;e>t;t++)s.push(this._byID[i.updated[t]]);this._persistence.update(s)}this._persistence.commit()}},this.load=function(t){this._persistence&&this._persistence.load(this,function(e){e&&logger.log("error loading",JSON.stringify(e)),t&&t(e)})},this.save=function(){this._persistence&&this._persistence.save(this)},this.compare=function(t,e){var i=this.key,s={};if(isArray(t))for(var n=0,h=t.length;h>n;++n)s[t[n][i]]=t[n];else for(var r in t)s[r]=t[r];for(var a,o=this._byIndex.slice(0),n=0;a=o[n];++n){var r=a[i];e.call(this,this,a,s[r]),delete s[r]}for(var r in s)e.call(this,this,null,s[r])},this.filter=function(t){var e,i,s,n,h=new DataSource({key:this.key}),r=this.length;for(h.key=this.key,n=0;r>n;++n){i=this._byIndex[n],s=!0;for(e in t)"string"==typeof i[e]&&-1==i[e].toLowerCase().indexOf(t[e])&&(s=!1);s&&h.add(i)}return h}});'),jsio.setCachedSrc("../node_modules/jsio/packages/lib/Callback.js",'exports=Class(function(){this._fired=!1,this._id=0,this._pending=null,this.init=function(){this._run=[]},this.hasFired=this.fired=function(){return this._fired},this.reset=function(){this._args=[],this._fired=!1},this.clear=function(){this.reset(),this._run=[],this._pending=null,this._stat=null},this.forward=function(i){this.run.apply(this,i)},this.run=function(i,t){var s=t?bind.apply(this,arguments):i;return s&&(this._fired?s.apply(this,this._args):this._run.push(s)),this},this.runOrTimeout=function(i,t,s){if(i||t)if(this._fired)i.apply(this,this._args);else{var n=bind(this,function(){clearTimeout(r),i.apply(this,this._args)});this.run(n);var r=setTimeout(bind(this,function(){for(var i=0,s=this._run.length;s>i;++i)if(this._run[i]==n){this._run.splice(i,1);break}t()}),s)}},this.fire=function(){if(!this._fired){this._fired=!0;var i=this._run;this._args=arguments;for(var t=0,s=i.length;s>t;++t)i[t]&&i[t].apply(this,arguments)}},this.chain=function(i){return this._pending||(this._pending={}),void 0===i&&(i=this._id++),this._pending[i]=!0,this.reset(),bind(this,"_deferred",i)},this._deferred=function(i){if(this._stat||(this._stat={}),!this._stat.hasOwnProperty(i)){this._stat[i]=Array.prototype.slice.call(arguments,1);var t=this._pending;delete t[i];for(var i in t)if(t.hasOwnProperty(i))return;this.fire(this._stat)}}});'),jsio.setCachedSrc("../node_modules/squill/models/BasicDataSource.js",'jsio("import lib.PubSub as PubSub");var BasicDataSource=exports=Class(PubSub,function(t){this.init=function(i){t(this,"init",arguments),this.key=this._key=i.key,this._channel=i.channel,this._hasRemote=i.hasRemote},this.getKey=function(){return this._key}});'),jsio.setCachedSrc("../node_modules/squill/Selection.js",'jsio("import lib.PubSub"),exports=Class(lib.PubSub,function(){this.init=function(t){this._parent=t.parent,this._type=t.type||!1,this._selection=t.selectionStore||new exports.LocalStore,this._maxSelections=t.maxSelections||1,this._currentSelectionCount=0,this._lastSelected=null},this.getType=function(){return this._type},this.isSelected=function(t){return"object"==typeof t&&(t=t[this._parent.getDataSource().key]),this._selection.isSelected(t)},this.toggle=function(t){this._setSelected(t,!this.isSelected(t[this._parent.getDataSource().key]))},this.select=function(t){(this._currentSelectionCount<this._maxSelections||"single"==this._type)&&this._setSelected(t,!0)},this.deselect=function(t){this._setSelected(t,!1)},this.clear=this.deselectAll=function(){this._selection.deselectAll(),this._currentSelectionCount=0},this.get=function(){return 1==this._maxSelections?Object.keys(this._selection.get())[0]:Object.keys(this._selection.get())},this.getSelectionCount=function(){return this._currentSelectionCount},this._setSelected=function(t,e){if(t){var i=this._parent.getDataSource(),s=i.key;if("string"!=typeof t||(t=i.get(t))){var n=t[s];if(this._selection.isSelected(n)!=e){if(e){if(this._lastSelected&&"single"==this._type){var c=this._lastSelected[s];this._selection.deselect(c),this._currentSelectionCount--,this.publish("Deselect",this._lastSelected,c)}this._lastSelected=t,this._selection.select(n),this._currentSelectionCount++}else this._selection.deselect(n),this._currentSelectionCount--;this.publish(e?"Select":"Deselect",t,n)}}}}}),exports.LocalStore=Class(function(){this.init=function(){this._store={}},this.get=function(){return merge({},this._store)},this.select=function(t){this._store[t]=!0},this.deselect=function(t){delete this._store[t]},this.deselectAll=function(t){this._store={}},this.isSelected=function(t){if(void 0!==t)return!!this._store[t];for(var e in this._store)return!0;return!1}});'),jsio.setCachedSrc("../node_modules/squill/TextButton.js",'jsio("import .Button, .Widget"),jsio("from util.browser import $");var TextButton=exports=Class(Button,function(t){this._type="text-button",this.buildWidget=function(){var t=this._el;$.setText(t,this.getI18n("label")||this.getI18n("text")),this.initMouseEvents(t),this.initKeyEvents(t)},this.setLabel=function(t){this._opts.label=t,this._el&&$.setText(this._el,t)}});Widget.register(TextButton,"TextButton");'),jsio.setCachedSrc("../node_modules/squill/Button.js",'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import .hint as hint");var Button=exports=Class(Widget,function(t){this._css="btn",this._type="button",this.init=function(i){i=merge(i,{tag:"button",isEnabled:!0}),this._isEnabled=i.isEnabled,t(this,"init",[i]),this._hint=i.hint},this.create=function(){this._opts.style=JS.merge(this._opts.style,{whiteSpace:"nowrap",display:"block"}),t(this,"create",arguments)},this.buildWidget=function(){var t=this._el;this.initMouseEvents(t),this.initKeyEvents(t),t.style.userSelect="none",t.style.MozUserSelect="none",t.style.KhtmlUserSelect="none",t.unselectable="on"},this._setHintTimeout=function(t){this._hint&&(this._hintTimeout&&clearTimeout(this._hintTimeout),this._hintTimeout=setTimeout(bind(this,function(){hint.show(t.pageX+12,t.pageY+14,this._hint)}),300))},this.onMouseOver=function(t){this._setHintTimeout(t)},this.onMouseMove=function(t){this._setHintTimeout(t)},this.onMouseOut=function(t){hint.hide(),this._hintTimeout&&clearTimeout(this._hintTimeout)},this.onClick=function(i){$.stopEvent(i),this._isEnabled&&(this._opts.onClick&&this._opts.onClick(i,this),t(this,"onClick",arguments))},this.captureOnEnter=function(t){t.subscribe("KeyDown",this,"onKeyDown"),t.subscribe("KeyUp",this,"onKeyUp")},this.onKeyDown=function(t){13==t.keyCode&&($.stopEvent(t),this.onMouseDown())},this.onKeyUp=function(t){13==t.keyCode&&($.stopEvent(t),this.onMouseUp(),this.onClick(t))},this.show=function(){return this.onBeforeShow(),this.getElement().style.display="inline-block",this.onShow(),this},this.blur=function(){this._el&&this._el.blur()},this.focus=function(){this._el&&this._el.focus()},this.setEnabled=function(t){this._isEnabled!=t&&(this._isEnabled=t,t?$.removeClass(this._el,"disabled"):$.addClass(this._el,"disabled"))}});'),jsio.setCachedSrc("../node_modules/squill/hint.js",'jsio("from util.browser import $");var hint=$({parent:document.body,className:"hint"});exports.show=function(t,e,i){hint.innerHTML=i,hint.style.left=t+"px",hint.style.top=e+"px",hint.style.display="block",console.log(i),t+hint.offsetWidth>=document.width&&(hint.style.left=t-hint.offsetWidth+"px")},exports.hide=function(){hint=hint||$({parent:document.body,className:"graphHint"}),hint.style.display="none"};var setHintTimeout=function(t){t.target.hintTimeout&&clearTimeout(t.target.hintTimeout),t.target.hintTimeout=setTimeout(bind(this,function(){exports.show(t.pageX+12,t.pageY+14,t.target.hintText)}),300)};exports.add=function(t,e){t.hintText=e,$.onEvent(t,"mouseover",setHintTimeout),$.onEvent(t,"mousemove",setHintTimeout),$.onEvent(t,"mouseout",function(t){exports.hide(),t.target.hintTimeout&&clearTimeout(t.target.hintTimeout)})};'),jsio.setCachedSrc("../node_modules/squill/TextInput.js",'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import squill.models.bindings as bindings");var TextInput=exports=Class(Widget,function(t){this._type="text",this._css="textInput",this.init=function(i){i=merge(i,{name:"",value:"",multiline:!1}),this._def={children:[{tag:i.multiline?"textarea":"input",id:"_input",attrs:{type:"text",value:i.value,name:i.name},style:merge(i.textStyle,{MozBoxSizing:"border-box",WebkitBoxSizing:"border-box",MsBoxSizing:"border-box",boxSizing:"border-box"})}],style:{position:"relative"}},i.prefixLabel&&this._def.children.unshift({id:"_label",text:i.label}),t(this,"init",[i])},this.buildWidget=function(){var t=this._el;this._opts.type;"ontouchstart"in this._el&&(this._overlay=$({parent:this._el,attrs:{noCapture:!0},style:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:1}}),this._overlay.addEventListener("click",bind(this,function(){$.hide(this._overlay),this._input.focus()}),!0));var i=this._opts;if(!i.prefixLabel||i.placeholder){var e=this.getI18n("label");null===this._input.getAttribute("placeholder")?this._input.setAttribute("placeholder",i.placeholder||e):this._placeholder=$.create({tag:"button",text:e,style:{position:"absolute"},parent:t})}this.initMouseEvents(t),this.initFocusEvents(this._input),this.initKeyEvents(this._input)},this.focus=function(){this._input.focus()},this.blur=function(){this._input.blur()},this.getInputElement=function(){return this._input},this.setName=function(i){t(this,"setName",arguments),this._input&&(this._input.name=i)},this.setData=this.setValue=function(t){void 0===t&&(t=""),this.saveSelection(),this._value=this._input.value=t,this.restoreSelection()},this.getValue=function(){return this._input.value},this.onKeyDown=function(){t(this,"onKeyDown",arguments),this._placeholder&&$.hide(this._placeholder)},this.onKeyUp=function(){t(this,"onKeyUp",arguments),this.checkLabel(),this.checkValue()},this.onMouseDown=function(i){t(this,"onMouseDown",arguments),i.stopPropagation()},this.onKeyPress=function(i){t(this,"onKeyPress",arguments),13==i.keyCode&&this.publish("EnterPressed"),this.checkValue()},this.onBlur=function(){t(this,"onBlur"),this.checkLabel(),this._overlay&&$.show(this._overlay)},this.isValid=function(){return this._isValid},this.checkValue=function(){var t=this._input.value,i=this._opts.formatter;if(i&&(t=i(t)),t==INVALID_VALUE)return this._isValid=!1,void $.addClass(this._el,"invalid");if(this._isValid=!0,$.removeClass(this._el,"invalid"),this._value!=t){this._value=t;var e=this._input;t!=e.value&&(this.saveSelection(),e.value=t,this.restoreSelection()),this.publish("change",this._value),this.publish("ValueChange",this._value)}},this.saveSelection=function(){this._selection={start:this._input.selectionStart,end:this._input.selectionEnd}},this.restoreSelection=function(){var t=this._input;this._isFocused&&(t.selectionStart=this._selection.start,t.selectionEnd=this._selection.end)},this.checkLabel=function(){this._placeholder&&/^\\s*$/.test(this._input.value)&&$.show(this._placeholder)},this.onClick=function(){t(this,"onClick")},this.setEnabled=function(t){this._isEnabled=t,t?(delete this._input.disabled,this.removeClass("disabled")):(this._input.disabled=!0,this.addClass("disabled"))},this.isEnabled=function(){return this._isEnabled},this.disable=function(){this.setEnabled(!1)},this.enable=function(){this.setEnabled(!0)}}),INVALID_VALUE=exports.INVALID_VALUE={};Widget.register(TextInput,"TextInput");'),jsio.setCachedSrc("../node_modules/squill/TextArea.js",'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import .TextInput");var TextArea=exports=Class(TextInput,function(t){this._tag="textarea"});Widget.register(TextArea,"TextArea");'),jsio.setCachedSrc("../node_modules/squill/Scroller.js",'jsio("import .Drag"),jsio("import .Widget"),jsio("import .transforms"),jsio("from util.browser import $"),exports=Class(Widget,function(t){this._css="scroller",this.init=function(s){s=merge(s,{momentum:!0}),this._scrollTop=0,this._lastDelta={diff:0,when:0,duration:0},this._hasMomentum=s.momentum,t(this,"init",[s])},this.buildContent=function(){var s=this._el;if($.style(s,{height:"100%"}),this._scrollPane=$({parent:s,className:"squill-scrollPane",minHeight:"100%"}),"ontouchstart"in s?(s.addEventListener("touchstart",bind(this,"onTouchStart"),!0),s.addEventListener("mousedown",this,"start"),this.initDragEvents(),this._el.style.overflow="hidden",transforms.setTop(this._scrollPane,0)):this._el.style.overflow="auto",this._def){var i=this._def;this._def=null,this.buildChildren(merge({el:this._scrollPane},i))}return t(this,"buildContent",arguments)},this.getScrollTop=function(){return this._scrollTop},this.getContainer=this.getScrollPane=function(){return this._scrollPane},this.onTouchStart=function(){this._momentum&&clearInterval(this._momentum)},this.onDragStart=function(t,s){this._height=this._scrollPane.offsetHeight-this._el.offsetHeight,this._lastDelta.when=+new Date,this._momentum&&clearInterval(this._momentum)},this.onDrag=function(t,s,i){var e=+new Date,o=this._lastDelta;o.diff=i.y,o.duration=o.when&&e-o.when||0,o.when=e,this.scrollTo(this._scrollTop+i.y)},this.scrollTo=function(t,s){this._scrollTop=t,this._scrollTop<-this._height&&(this._scrollTop=-this._height),this._scrollTop>0&&(this._scrollTop=0),this._el.setAttribute("squill-scroller-top",-this._scrollTop);var i=bind(this,function(){if(document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("scroll",!0,!1),this._el.dispatchEvent(t)}});s?transforms.move(this._scrollPane,0,this._scrollTop,"0.5s ease-in-out",i):(transforms.move(this._scrollPane,0,this._scrollTop),i())},this.onDragStop=function(t,s){if($.stopEvent(s),this._hasMomentum&&0!=this._lastDelta.duration){var i=this._lastDelta,e=i.diff/i.duration,o=(i.when,i.when);this._momentum=setInterval(bind(this,function(){var t=+new Date,s=t-o,i=e*s;this.scrollTo(this._scrollTop+i),e*=.95,Math.abs(e)<.01&&(clearTimeout(this._momentum),this._momentum=null),o=t}),10)}}});'),jsio.setCachedSrc("../node_modules/squill/transforms.js",'jsio("from util.browser import $");var vendor=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",has3d="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,hasTransform=vendor+"Transform"in document.documentElement.style,translateStart="translate"+(has3d?"3d(":"("),translateEnd=has3d?",0)":")";hasTransform?(exports.setLeft=function(t,n){t.style[vendor+"Transform"]=translateStart+n+"px,0"+translateEnd},exports.setTop=function(t,n){t.style[vendor+"Transform"]=translateStart+"0,"+n+"px"+translateEnd}):(exports.setLeft=function(t,n){t.style.left=n+"px"},exports.setTop=function(t,n){t.style.top=n+"px"}),exports.onTransitionEnd=function(t,n){var r=!1,o=function(){if(!r){r=!0;for(var t,o=0;t=e[o];++o)t();n()}},e=[$.onEvent(t,"webkitTransitionEnd",o),$.onEvent(t,"transitionend",o),$.onEvent(t,"oTransitionEnd",o)]},exports.setTransition=function(t,n,r){if(n){var o=t.style[vendor+"Transition"];exports.onTransitionEnd(t,function(){t.style[vendor+"Transition"]=o,r&&r()}),t.style[vendor+"Transition"]="-"+vendor+"-transform "+n}else t.style[vendor+"Transition"]="none"},exports.rotate=function(t,n,r,o){return hasTransform?(exports.setTransition(t,r,o),t.style[vendor+"Transform"]="rotate("+n+")",void(o&&!r&&o())):void(o&&o())},exports.move=function(t,n,r,o,e){return hasTransform?(exports.setTransition(t,o,e),t.style[vendor+"Transform"]=translateStart+n+"px,"+r+"px"+translateEnd,void(e&&!o&&e())):void(e&&e())},exports.hasTransform=hasTransform;'),
jsio.setCachedSrc("../node_modules/squill/Canvas.js",'jsio("from util.browser import $"),jsio("import .Widget");var Canvas=exports=Class(Widget,function(t){this._css="cnvs",this._type="canvas",this.init=function(i){i=merge(i,{tag:"canvas"}),this._isEnabled=i.isEnabled,t(this,"init",[i])},this.create=function(){t(this,"create",arguments)},this.buildWidget=function(){var t=this._el;t.width=this._opts.width,t.height=this._opts.height,this._opts.color&&(t.style.backgroundColor=this._opts.color),this.initMouseEvents(t),this.initKeyEvents(t)}});'),jsio.setCachedSrc("../node_modules/squill/CheckBox.js",'jsio("import .Widget"),jsio("from util.browser import $");var CheckBox=exports=Class(Widget,function(t){this._css="checkbox",this._def={tag:"label",children:[{id:"checkbox",tag:"input",attrs:{type:"checkbox"}},{tag:"span",id:"label",text:""}]},this.buildWidget=function(){this.setLabel(this._opts.label||""),this._opts.name&&this.setName(this._opts.name),this._opts.value&&this.setValue(this._opts.value),this.initMouseEvents(this.checkbox),$.onEvent(this.checkbox,"change",this,"_onCheck"),this._opts.__result&&this._opts.__result.addSubscription(this,"Select",this._opts.id)},this._onCheck=function(){this.publish("Check",this.isChecked()),this.emit("change",this.isChecked())},this.setLabel=function(t){$.setText(this.label,t)},this.setName=function(t){this.checkbox.name=t},this.setData=this.setValue=function(t){this.checkbox.checked=!!t},this.isChecked=function(){return this.checkbox.checked},this.setChecked=function(t){this.checkbox.checked=t},this.getValue=function(){return this.isChecked()?this.checkbox.value:null}});'),jsio.setCachedSrc("../node_modules/squill/Menu.js",'function trapIframes(){_trappedFrames.length&&untrapIframes(),_trappedFrames=Array.prototype.map.call(document.getElementsByTagName("iframe"),function(e){var t={el:e,set:e.style.pointerEvents};return e.style.pointerEvents="none",t})}function untrapIframes(){_trappedFrames.forEach(function(e){e.el.style.pointerEvents=e.set})}jsio("import lib.PubSub"),jsio("import .Widget"),jsio("import .Delegate"),jsio("from util.browser import $");var Menu=exports=Class(Widget,function(e){this._css="menu",this._def={children:[{id:"container"}]},this.delegate=new Delegate(function(e){e.call=function(e,t){var n=e.controller.delegate;n.call.apply(n,[e.controller].concat(Array.prototype.slice.call(arguments,1)))}}),this.getContainer=function(){return this.container},this.onBeforeShow=function(){},this.onShow=function(){},this.onBeforeHide=function(){},this.onHide=function(){},this.toggle=function(){this._isShowing?this.hide():this.show()},this.show=function(){this._isShowing=!0;var e=this._el,t=bind(this,function(t){for(var n=t.target;n;){if(n==e)return!0;if(/squill-checkbox/.test(n.className))return!1;n=n.parentNode}return t.preventDefault&&t.preventDefault(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,!0}),n=bind(this,function(e){t(e)&&(this.hide(),untrapIframes(),document.body.removeEventListener("mousedown",t,!0),document.body.removeEventListener("mouseup",t,!0),document.body.removeEventListener("click",n,!0))});trapIframes(),document.body.addEventListener("mousedown",t,!0),document.body.addEventListener("mouseup",t,!0),document.body.addEventListener("click",n,!0),$.show(e),this.emit("open"),Menu.emit("open",this)},this.hide=function(){this._isShowing=!1,$.hide(this._el),this.emit("close"),Menu.emit("close",this)}}),subs=new lib.PubSub;Menu.emit=bind(subs,"emit"),Menu.on=bind(subs,"on"),Menu.removeListener=bind(subs,"removeListener");var _trappedFrames=[];'),jsio.setCachedSrc("../node_modules/squill/Slider.js",'jsio("from util.browser import $"),jsio("import .Widget");var Slider=exports=Class(Widget,function(t){this._css="rng",this._type="range",this.init=function(i){this._width=i.width||100,this._padding=12,this._hover=!1,this._fillColor=i.fillColor||"#000000",this._lineColor=i.lineColor||"#FFFFFF",this._def={children:[{id:i.id+"Canvas",tag:"canvas",attrs:{width:this._width,height:2*this._padding}}]},t(this,"init",[i])},this._render=function(){var t,i,s=this._width,h=this._padding,e=this._ctx;e.clearRect(0,0,s,2*h),e.lineCap="round",e.beginPath(),e.arc(h+2,h,2,.5*Math.PI,1.5*Math.PI,!1),e.arc(s-h-2,h,2,1.5*Math.PI,.5*Math.PI,!1),e.closePath(),e.lineWidth=1,e.strokeStyle=this._lineColor,e.stroke(),e.fillStyle=this._fillColor,e.fill(),e.save(),this._hover&&(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=10,e.shadowColor="#0099FF"),i=~~((s-2*h)*(this.value-this.min)/(this.max-this.min)),e.beginPath(),e.arc(h+i,h,5,0,2*Math.PI,!1),e.closePath(),t=e.createRadialGradient(h-1+i,h-1,0,h+i,h,4),t.addColorStop(0,"#FFFFFF"),t.addColorStop(1,"#707070"),e.fillStyle=t,e.fill(),e.restore()},this.buildWidget=function(){var t=this._el;canvas=t.firstChild,t.slider=this,$.onEvent(canvas,"mouseout",this,"_onMouseOut"),$.onEvent(canvas,"mousedown",this,"_onMouseDown"),$.onEvent(canvas,"mouseup",this,"_onMouseUp"),$.onEvent(canvas,"mousemove",this,"_onMouseMove"),this.min=this._opts.min||0,this.max=this._opts.max||100,this.step=this._opts.step||1,this.value=this._opts.value||0,this._mouseDown=!1,this._checkRange(),this._ctx=canvas.getContext("2d"),this._render()},this.setValue=function(t){this.value=t,this._render()},this._onChange=function(){this.publish("Change",this.value)},this._checkRange=function(){this.value<this.min&&(this.value=this.min),this.value>this.max&&(this.value=this.max)},this._checkMouse=function(t){var i,s=t.offsetX,h=t.offsetY,e=this._width,o=this._padding,n=this._hover;this._mouseDown?s>o&&h>o-5&&e-o>s&&o+5>h&&(i=(t.offsetX-o)/(e-2*o)*(this.max-this.min),i=this.min+Math.round(i/this.step)*this.step,this.value=i,this._checkRange(),this._render(),this._onChange()):(h>o-5&&o+5>h?(v=o+~~((e-2*o)*(this.value-this.min)/(this.max-this.min)),this._hover=s>v-5&&h<v+5):this._hover=!1,this._hover!==n&&this._render())},this._onMouseOut=function(t){this._mouseDown=!1,this._hover=!1,this._render()},this._onMouseDown=function(t){this._mouseDown=!0,this._checkMouse(t)},this._onMouseUp=function(t){this._mouseDown=!1},this._onMouseMove=function(t){this._checkMouse(t)}});'),jsio.setCachedSrc("../node_modules/squill/Color.js",'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import .jscolor.jscolor as jscolor");var Color=exports=Class(Widget,function(t){this._css="clr",this._type="text",this.init=function(i){i=merge(i,{tag:"input"}),this._isEnabled=i.isEnabled,t(this,"init",[i])},this.buildWidget=function(){var t=this._el;$.addClass(t,"squill-color"),t.min=this._opts.min||0,t.max=this._opts.max||100,t.step=this._opts.step||1,t.value=this._opts.value||0,t.onchange=bind(this,this._onChange),jscolor.bind(t)},this.setValue=function(t){t&&("#"!==t[0]&&(t="#"+t),this._el.style.backgroundColor=t,t=t.substr(1,6)),this._el.value=t},this.getValue=function(){return this._el.value},this._onChange=function(){this.publish("Change",this._el.value)}});'),jsio.setCachedSrc("../node_modules/squill/VerticalCenter.js",'jsio("import .Widget"),jsio("from util.browser import $"),exports=Class(Widget,function(){this._def={tag:"table",style:merge({height:"100%",width:"100%"},def.style),attrs:{cellpadding:0,cellspacing:0},children:[$({tag:"tbody",children:[$({tag:"tr",children:[$({id:"contentPane",tag:"td",attrs:{valign:"middle"},style:{verticalAlign:"middle"}})]})]})]},this.addElement=function(){this.contentPane.appendChild(el)}});'),jsio.setCachedSrc("../node_modules/squill/TreeList.js",'jsio("from util.browser import $"),jsio("import .Widget");var elementIDPrefix=0,TreeList=exports=Class(Widget,function(e){var t={key:"id",label:"title",wrapperId:"browser",contentId:"contentWrapper"};this.init=function(i){i=i||{},i=merge(i,t),this._initClasses(i),this._key=i.key,this._label=i.label,this._wrapperId=i.wrapperId,this._contentId=i.contentId,this._leaveWidth=i.leaveWidth||600,elementIDPrefix++,this._elementIDPrefix="menuItem"+elementIDPrefix+"_",i.dataSource?this.setDataSource(i.dataSource):this._dataSource=null,this._def={id:this._wrapperId,className:"browser",children:[{id:this._contentId,className:"contentWrapper",children:[]}]},this._root=null,this._itemByKey={},e(this,"init",arguments)},this._initClasses=function(e){this._classNames={nodeWrapper:e.nodeWrapper||"browserNodeWrapper",nodeWrapperHidden:e.nodeWrapperHidden||"browserNodeWrapperHidden",node:e.node||"browserNode",nodeChildren:e.nodeChildren||"children",nodeActive:e.nodeActive||"active",nodeActiveChild:e.nodeActiveChild||"browserNodeActiveChild"}},this._clearItem=function(e){var t,i,s,n;if(e.children)for(i=e.children;i.length;)this._clearItem(i.pop());if(e.parent){for(t=e.parent,i=t.children,s=0,n=i.length;n>s;s++)if(i[s]===e){i.splice(s,1);break}!i.length&&t.group&&($.remove(t.group.parentNode),$.remove(t.group),delete t.group)}$.remove(e.node),e.group&&$.remove(e.group)},this._createMenuId=function(e){var t=this._menuId;return e&&this._menuId++,this._elementIDPrefix+t},this._createGroup=function(e){var t=this._createMenuId(!0),i=$({parent:$({parent:$.id(this._contentId),id:t,className:e?this._classNames.nodeWrapper:this._classNames.nodeWrapperHidden}),className:this._classNames.node});return i.menuId=t,i},this._createItem=function(e,t){var i=this._createMenuId(!0);e.node=$({parent:t,id:i,tag:"a",text:e[this._label]}),$.onEvent(i,"click",this,"onClick",e)},this.buildWidget=function(){this._menuId=0,this._menuById=[],this._menuStack=[],this._menuActiveItem=!1,null!==this._dataSource&&this._dataSource.each(bind(this,this.onCreateItem))},this._removeFromStack=function(e){for(var t=this._menuStack,i=null;t.length&&t[t.length-1].depth>=e;)i=t.pop(),$.removeClass(i.node.id,this._classNames.nodeActive),$.removeClass(i.node.id,this._classNames.nodeActiveChild),i.group&&($.addClass(i.group.menuId,this._classNames.nodeWrapperHidden),$.removeClass(i.group.menuId,this._classNames.nodeWrapper));return i},this.applyNodeStyle=function(e){e.children&&e.children.length?$.addClass(e.node,this._classNames.nodeChildren):$.removeClass(e.node,this._classNames.nodeChildren),e===this._menuActiveItem?$.addClass(e.node,this._classNames.nodeActive):$.removeClass(e.node,this._classNames.nodeActive),void 0!==e.removeCustomClass&&e.removeCustomClass&&$.removeClass(e.node,e.removeCustomClass),void 0!==e.customClass&&e.customClass&&($.removeClass(e.node,e.customClass),$.addClass(e.node,e.customClass))},this._addToStack=function(e){if(this._menuStack.push(e),this.applyNodeStyle(e),e.children&&e.children.length){if(!e.group){var t,i,s;for(e.children.sort(),e.group=this._createGroup(!0),i=0,s=e.children.length;s>i;i++)t=e.children[i],this._createItem(t,e.group),this.publish("DisplayItem",t.data,t),this.applyNodeStyle(t)}$.addClass(e.group.menuId,this._classNames.nodeWrapper),$.removeClass(e.group.menuId,this._classNames.nodeWrapperHidden)}},this.onClick=function(e){var t,i=this._menuStack,s=null;this.publish("SelectItem",e.data,e),this._menuActiveItem&&(s=this._menuActiveItem,this._menuActiveItem=null,this.applyNodeStyle(s),s=null),i.length&&e.depth<=i[i.length-1].depth&&(s=this._removeFromStack(e.depth)),s!==e&&this._addToStack(e),this._menuActiveItem=e,this.applyNodeStyle(e),i.length&&(t=i.length,i[i.length-1].children&&i[i.length-1].children.length&&t++,$.id(this._contentId).style.width=200*t+this._leaveWidth+"px")},this.onUpdateItem=function(e,t){var i,s,n,r,a,h={title:e[this._label],toString:function(){return this.title}};if(this._itemByKey[t])return void(this._itemByKey[t].node&&(this._itemByKey[t].node.innerHTML=e[this._label]));if(null===e.parent||-1===e.parent)null===this._root&&(this._rootGroup=this._createGroup(!0),this._createItem(h,this._rootGroup),this._root=h,h.data=e,h.depth=0,h.parent=null,this.publish("DisplayItem",h.data,h),this.applyNodeStyle(h));else{if(i=this._itemByKey[e.parent[this._key]])if(i.children||(i.children=[]),s=i.children,!this._menuActiveItem||this._menuActiveItem!==i&&this._menuActiveItem.parent!==i)s.push(h);else{for(r=0,a=s.length;a>r;r++)s[r].node&&($.remove(s[r].node),s[r].node=null);for(s.push(h),s.sort(),i.group||(i.group=this._createGroup(!0),$.id(this._contentId).style.width=200*(this._menuStack.length+1)+500+"px"),r=0,a=s.length;a>r;r++)n=s[r],this._createItem(n,i.group),this.publish("DisplayItem",n.data,n),this.applyNodeStyle(n)}h.depth=i.depth+1,h.parent=i}h.data=e,this._itemByKey[t]=h},this.onCreateItem=function(e){this.onUpdateItem(e,e[this._key])},this.onRemoveItem=function(e,t){var i,s,n=this._itemByKey[t];n&&(i=n.parent.children.length<=1,s=e[this._dataSource.parentKey],this._removeFromStack(this._itemByKey[t].depth-1),this._clearItem(this._itemByKey[t]),this._menuActiveItem=!1,delete this._itemByKey[t],this.publish("UnSelectItem"),i&&s&&(n=this._itemByKey[s[this._dataSource.key]],this.publish("DisplayItem",n.data,n),this.applyNodeStyle(n)))},this.showItem=function(e){var t=this.getTreeNode(e);this.publish("DisplayItem",e,t),this.applyNodeStyle(t)},this.setDataSource=function(e){this._dataSource=e,this._dataSource.subscribe("Update",this,this.onUpdateItem),this._dataSource.subscribe("Remove",this,this.onRemoveItem)},this.getPathString=function(e){var t,i,s="",n=this._menuStack;for(e=e||" ",t=0,i=n.length;i>t;t++)""!==s&&(s+=e),s+=n[t].data[this._label];return s},this.getTreeNode=function(e){return this._itemByKey[e[this._dataSource.key]]}});'),jsio.setCachedSrc("../node_modules/squill/Graph.js",'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import .hint as hint");var Graph=exports=Class(Widget,function(t){this._css="cnvs",this._type="canvas",this.init=function(e){params=merge(e,{tag:"canvas"}),t(this,"init",arguments),this.setSettings(e.settings||{}),this._width=e.width||400,this._height=e.height||400,this._rectangles=[],this._data=!1,$.onEvent(this._el,"mousemove",this,this._onMouseMove),$.onEvent(this._el,"mouseout",this,this._onMouseOut)},this._onMouseMove=function(t){for(var e,i=this._rectangles,a=!1,n=i.length;n;)if(e=i[--n],t.offsetX>=e.x1&&t.offsetY>=e.y1&&t.offsetX<=e.x2&&t.offsetY<=e.y2){a=!0;break}a?hint.show(t.pageX+15,t.pageY+15,e.label):hint.hide()},this._onMouseOut=function(t){hint.hide()},this.buildWidget=function(){var t=this._el;this.initMouseEvents(t),this.initKeyEvents(t)},this._renderBackground=function(t){var e=this._el,i=e.width,a=e.height;this._currentWidth=i,this._currentHeight=a,this._settings.fillColor?(t.fillStyle=this._settings.fillColor,t.fillRect(0,0,i,a)):t.clearRect(0,0,i,a)},this._calculateSegments=function(t,e){var i,a,n,l=this._settings,s=0,o=0,r=e.length;for(i=0;r>i;i++)for(item=e[i],o=Math.max(t.measureText(item.title).width,o),o>l.maxLabelSize&&(o=l.maxLabelSize),a=0,n=item.points.length;n>a;a++)s=Math.max(item.points[a],s);for(var h,g=[.5,.25,.2,.125,.1],d=0,f=1;s/(g[d]*f)>10;)d++,d>=g.length&&(d=0,f*=10);return h=Math.ceil(s/(g[d]*f)),{steps:h,step:g[d],max:h*g[d]*f,maxLabel:o+4,factor:f}},this._trimLabel=function(t,e,i){if(e.measureText(i).width>t.maxLabel){for(;e.measureText(i+"...").width>t.maxLabel;)i=i.substr(0,i.length-1);i+="..."}return i},this._renderHorizontalAxis=function(t,e,i){var a,n,l,s,o,r,h,g=this._settings,d=g.valueSpace,f=g.mainPadding,x=this._currentWidth-2*f-d,m=this._currentHeight-2*f-t.maxLabel,c=x/i.length;for(e.strokeStyle=g.barBackground,o=0;2>o;o++)l=d+f+.5+o*x,e.beginPath(),e.moveTo(l,f),e.lineTo(l,f+m),e.stroke();for(e.textAlign="right",e.textBaseline="top",o=0,r=i.length;r>o;o++)l=d+f+o*c,e.save(),e.rotate(Math.PI*-.5),a=this._trimLabel(t,e,i[o].title),e.fillStyle=this._settings.textColor,e.fillText(a,-(f+m+4),l),e.restore(),0===(1&o)&&(e.fillStyle=g.barBackground,e.fillRect(l,f,c,m));for(e.strokeStyle=this._settings.lineColor,e.fillStyle="#000000",n=0,o=m,r=0;o>=0;)a=(r*t.step).toString(10),h=a.indexOf("."),-1!==h&&(h=a.length-h-1,h>n&&(n=h)),o=Math.ceil(o-m/t.steps),r++;for(o=m,r=0;o>=0;){if(l=f+d,s=f+~~o+.5,e.beginPath(),e.moveTo(l,s),e.lineTo(l+x,s),e.stroke(),a=(r*t.step).toString(10),n&&-1===a.indexOf("."))for(a+=".",h=0;n>h;h++)a+="0";e.fillStyle=this._settings.textColor,e.fillText(a,d+f-2,f+o-8),o=Math.ceil(o-m/t.steps),r++}e.textAlign="left",a=g.mainLabel+" x"+t.factor,o=f,r=f+m/2+(e.measureText(a).width+g.itemSize)/2,e.save(),e.rotate(Math.PI*-.5),e.fillStyle=this._settings.textColor,e.fillText(a,-r-g.itemSize,o),e.restore(),r-=e.measureText(a).width,e.beginPath(),e.moveTo(o+7.5,r),e.lineTo(o+7.5,r+26),e.stroke(),e.beginPath(),e.moveTo(o+3.5,r+5.5),e.lineTo(o+7.5,r),e.lineTo(o+11.5,r+5.5),e.stroke()},this._renderVerticalBars=function(t,e,i){var a,n,l,s,o,r,h,g,d,f=this._settings,x=f.valueSpace,m=f.mainPadding,c=this._currentWidth-2*m-x,u=this._currentHeight-2*m-t.maxLabel,b=c/i.length,p=b-2*f.barPadding;for(e.globalAlpha=.9,r=0,h=i.length;h>r;r++)for(s=i[r],o=s.points,d=o.length,a=~~(p/d),g=0;d>g;g++)n=s.points[g]/t.max*u,l=x+m+r*b+f.barPadding,barY=m+u-n,e.fillStyle=f.dataColors[g%f.dataColors.length],e.fillRect(l+g*a,barY,a-1,n);e.globalAlpha=1},this._renderVerticalPoints=function(t,e,i){var a,n,l,s,o,r,h,g,d,f,x=this._settings,m=-1!==x.types.indexOf("points"),c=-1!==x.types.indexOf("lines"),u=-1!==x.types.indexOf("area"),b=x.valueSpace,p=x.mainPadding,_=this._currentWidth-2*p-b,S=this._currentHeight-2*p-t.maxLabel,L=_/i.length,v=L-2*x.barPadding,y=[];for(pointYLast=null,h=0,g=i.length;g>h;h++){for(r=i[h],l=r.points,o=null!==pointYLast,null===pointYLast&&(pointYLast=[]),a=~~(b+p+h*L+x.barPadding+v/2),d=0,f=l.length;f>d;d++)n=~~(p+S-r.points[d]/t.max*S),y[d]||(y[d]=[]),y[d].push({x:a,y:n}),e.strokeStyle=x.dataColors[d%x.dataColors.length],m&&e.strokeRect(a-4.5,n-4.5,10,10),o&&c&&(e.beginPath(),e.moveTo(pointXLast,pointYLast[d]),e.lineTo(a,n),e.stroke()),pointYLast[d]=n;pointXLast=a}if(u){for(e.globalAlpha=.05,h=0,g=y.length;g>h;h++){for(e.beginPath(),e.lineTo(y[h][0].x,p+S),d=0,f=y[h].length;f>d;d++)s=y[h][d],e.lineTo(s.x,s.y);e.lineTo(y[h][f-1].x,p+S),e.closePath(),e.fillStyle=x.dataColors[h%x.dataColors.length],e.fill()}e.globalAlpha=1}},this._renderVerticalAxis=function(t,e,i){var a,n,l,s,o,r,h,g=this._settings,d=g.valueSpace,f=g.mainPadding,x=this._currentWidth-2*f-t.maxLabel,m=this._currentHeight-2*f-d,c=m/i.length;for(e.strokeStyle=g.barBackground,o=0;2>o;o++)s=f+.5+o*m,e.beginPath(),e.moveTo(f+t.maxLabel,s),e.lineTo(f+t.maxLabel+x,s),e.stroke();for(e.textAlign="right",e.textBaseline="top",o=0,r=i.length;r>o;o++)s=f+o*c,a=this._trimLabel(t,e,i[o].title),e.fillStyle=this._settings.textColor,e.fillText(a,f+t.maxLabel-4,s+4),this._rectangles.push({x1:f+t.maxLabel-4-e.measureText(a).width,y1:s+4,x2:f+t.maxLabel-4,y2:s+20,label:i[o].title}),0===(1&o)&&(e.fillStyle=g.barBackground,e.fillRect(f+t.maxLabel,s,x,c));for(e.textAlign="center",e.strokeStyle=this._settings.lineColor,e.fillStyle="#000000",n=0,o=0,r=0;x>=o;)a=(r*t.step).toString(10),h=a.indexOf("."),-1!==h&&(h=a.length-h-1,h>n&&(n=h)),o=Math.floor(o+x/t.steps),r++;for(o=0,r=0;x>=o;){if(l=f+t.maxLabel+~~o+.5,s=f,e.beginPath(),e.moveTo(l,s),e.lineTo(l,s+m),e.stroke(),a=(r*t.step).toString(10),n&&-1===a.indexOf("."))for(a+=".",h=0;n>h;h++)a+="0";e.fillStyle=this._settings.textColor,e.fillText(a,f+t.maxLabel+o,f+m+2),o=Math.floor(o+x/t.steps),r++}e.textAlign="left",a=g.mainLabel+" x"+t.factor,o=f+x/2-(e.measureText(a).width+g.itemSize)/2+t.maxLabel,r=f+m+18,e.fillStyle=this._settings.textColor,e.fillText(a,o,r),o+=e.measureText(a).width,e.beginPath(),e.moveTo(o+4,r+7.5),e.lineTo(o+g.itemSize,r+7.5),e.stroke(),e.beginPath(),e.moveTo(o+g.itemSize-4,r+3.5),e.lineTo(o+g.itemSize,r+7.5),e.lineTo(o+g.itemSize-4,r+11.5),e.stroke()},this._renderHorizontalBars=function(t,e,i){var a,n,l,s,o,r,h,g,d,f,x=this._settings,m=x.valueSpace,c=x.mainPadding,u=this._currentWidth-2*c-t.maxLabel,b=this._currentHeight-2*c-m,p=b/i.length,_=p-2*x.barPadding;for(e.globalAlpha=.9,h=0,g=i.length;g>h;h++)for(o=i[h],r=o.points,f=r.length,n=~~(_/f),d=0;f>d;d++)a=~~(o.points[d]/t.max*u),l=t.maxLabel+c,s=~~c+h*p+x.barPadding,e.fillStyle=x.dataColors[d%x.dataColors.length],e.fillRect(l,s+d*n,a,n-1);e.globalAlpha=1},this._renderHorizontalPoints=function(t,e,i){var a,n,l,s,o,r,h,g,d,f,x=this._settings,m=-1!==x.types.indexOf("points"),c=-1!==x.types.indexOf("lines"),u=-1!==x.types.indexOf("area"),b=x.valueSpace,p=x.mainPadding,_=this._currentWidth-2*p-t.maxLabel,S=this._currentHeight-2*p-b,L=S/i.length,v=L-2*x.barPadding,y=[];for(pointXLast=null,h=0,g=i.length;g>h;h++){for(r=i[h],l=r.points,o=null!==pointXLast,null===pointXLast&&(pointXLast=[]),n=~~(p+h*L+x.barPadding+v/2),d=0,f=l.length;f>d;d++)a=~~(p+r.points[d]/t.max*_+t.maxLabel),y[d]||(y[d]=[]),y[d].push({x:a,y:n}),e.strokeStyle=x.dataColors[d%x.dataColors.length],m&&e.strokeRect(a-4.5,n-4.5,10,10),o&&c&&(e.beginPath(),e.moveTo(pointXLast[d],pointYLast),e.lineTo(a,n),e.stroke()),pointXLast[d]=a;pointYLast=n}if(u){for(e.globalAlpha=.05,h=0,g=y.length;g>h;h++){for(e.beginPath(),e.moveTo(p+t.maxLabel,y[h][0].y),d=0,f=y[h].length;f>d;d++)s=y[h][d],e.lineTo(s.x,s.y);e.lineTo(p+t.maxLabel,y[h][f-1].y),e.closePath(),e.fillStyle=x.dataColors[h%x.dataColors.length],e.fill()}e.globalAlpha=1}},this.setData=function(t){var e,i=this._el,a=i.getContext("2d"),n=this._settings,l=n.types,s=function(){},o=function(){},r=function(){};switch(n.orientation){case"horizontal":i.width=this._width,i.height=t.length*n.itemSize+this._settings.valueSpace,s=bind(this,this._renderVerticalAxis),o=bind(this,this._renderHorizontalBars),r=bind(this,this._renderHorizontalPoints);break;case"vertical":i.width=t.length*n.itemSize+this._settings.valueSpace,i.height=this._height,s=bind(this,this._renderHorizontalAxis),o=bind(this,this._renderVerticalBars),r=bind(this,this._renderVerticalPoints)}a.font=n.font,this._renderBackground(a),t.length&&(e=this._calculateSegments(a,t),s(e,a,t),(-1!==l.indexOf("points")||-1!==l.indexOf("area")||-1!==l.indexOf("lines"))&&r(e,a,t),-1!==l.indexOf("bars")&&o(e,a,t)),this._data=t},this.setSettings=function(t){t.mainLabel=t.mainLabel||"",t.textColor=t.textColor||"#000000",t.fillColor=void 0===t.fillColor?"#FFFFFF":t.fillColor,t.lineColor=t.lineColor||"#000000",t.orientation=t.oriantation||"horizontal",t.types=t.types||"bars,lines,area,points",t.barPadding=t.barPadding||2,t.barBackground=t.barBackground||"#F8F8F8",t.mainPadding=t.mainPadding||10,t.valueSpace=t.valueSpace||40,t.dataColors=t.dataColors||["#DD0000","#00DD00","#0000DD"],t.font=t.font||"13px Verdana",t.maxLabelSize=t.maxLabelSize||200,t.itemSize=t.itemSize||50,this._settings=t},this.update=function(){this._data&&this.setData(this._data)}});'),jsio.setCachedSrc("../node_modules/squill/SelectBox.js",'jsio("import .Widget"),jsio("import squill.models.DataSource as DataSource"),jsio("from util.browser import $");var SelectBox=exports=Class(Widget,function(t){this._css="select",this._def={tag:"label",style:{display:"inline-block"},children:[{id:"_select",tag:"select"}]},this.init=function(e){e=merge(e,{renderer:bind(this,"defaultRenderer")}),this._items={},e.dataSource&&this.setDataSource(e.dataSource),t(this,"init",arguments)},this.buildWidget=function(){if(this._opts.name&&this.setName(this._opts.name),this._dataSource||this.setDataSource(new DataSource),this._opts.items){var t=1,e=this._opts.items.map(function(e){return"object"!=typeof e?{id:"string"==typeof e?e:t++,value:e}:(e.id||(e.id="value"in e?e.value:"title"in e?e.title:t++),e)});this._dataSource.add(e)}"value"in this._opts&&this.setValue(this._opts.value),this.initMouseEvents(this._el),$.onEvent(this._select,"change",this,"_onSelect")},this._onSelect=function(){var t=this._dataSource.get(this.getValue());t&&this.publish("change",t)},this.getDataSource=function(){return this._dataSource},this.setDataSource=function(t){this._dataSource&&(this._dataSource.unsubscribe("Update",this),this._dataSource.unsubscribe("Remove",this)),this._dataSource=t,this._dataSource.subscribe("Update",this,"onUpdateItem"),this._dataSource.subscribe("Remove",this,"onRemoveItem"),this._dataSource.forEach(function(t,e){this.onUpdateItem(e,t)},this)},this.defaultRenderer=function(t){var e=this._dataSource.getKey();return t.displayName||t.label||t.title||t.text||t[e]},this.onUpdateItem=function(t,e){var i=this._items[t],s=this._dataSource.getKey();if("string"==typeof e){var a={};a[s]=e,e=a}if(!i){var i=this._items[t]=$.create({tag:"option"});$.insertBefore(this._select,i)}i.setAttribute("value",e[s]);var o=this._opts.renderer;i.innerText="string"==typeof o?e[o]:o(e),i.value=e[s]},this.onRemoveItem=function(t){var e=this._items[t],i=this.getValue();e&&($.remove(e),delete this._items[t]);var s=this.getValue();s!=i&&this._onSelect()},this.setName=function(t){this._select.name=t},this.setValue=function(t){this._select.value=t},this.getValue=function(){return this._select.value}});'),jsio.setCachedSrc("devkit-view-inspector/debugger/DetailsWidget.js",'function noop(t){return t.stopPropagation(),t.preventDefault(),!1}jsio("from util.browser import $"),jsio("import squill.Widget as Widget"),jsio("import .InputWidget");var PropRow=Class(Widget,function(t){this.init=function(e){var i=[];this._def={className:"propRow",children:i},"string"==typeof e.prop&&(e.prop={title:e.prop,id:e.prop});var o=e.props||[e.prop];o.forEach(function(t){i.push({className:"propTitle",text:t.title||t.id},{id:t.id,type:InputWidget,prop:t})}),this._def.className+=" propCount"+o.length,t(this,"init",arguments),this.props=o}});exports=Class(Widget,function(t){this._def={children:[{id:"_header",children:[{text:"editing: ",tag:"span"},{id:"_editorType",tag:"span",text:"simulator",type:"label"},{id:"_closeBtn",type:"button",children:[{className:"glyphicon glyphicon-remove"}]}]},{id:"details",children:[{id:"viewDetails",type:"label"}]},{id:"detailsScroller",children:[{className:"propRow propSection",text:"position"},{type:PropRow,props:[{title:"x",id:"relX"},{title:"y",id:"relY"}]},{type:PropRow,prop:{title:"r",id:"relR",increment:.01}},{type:PropRow,props:[{title:"width",id:"relWidth"},{title:"height",id:"relHeight"}]},{type:PropRow,prop:{title:"scale",id:"relScale"}},{className:"propRow propSection",text:"style"},{type:PropRow,prop:{id:"opacity",min:0,max:1,increment:.01}},{type:PropRow,prop:"zIndex"},{type:PropRow,prop:{id:"visible",type:"boolean"}},{type:PropRow,props:[{title:"anchor x",id:"anchorX"},{title:"y",id:"anchorY"}]},{type:PropRow,props:[{title:"offset x",id:"offsetX"},{title:"y",id:"offsetY"}]},{type:PropRow,prop:{id:"clip",type:"boolean"}},{type:PropRow,prop:{id:"inLayout",type:"boolean"}},{type:PropRow,prop:"order"},{type:PropRow,prop:"flex"},{type:PropRow,prop:"layout"},{id:"boxProps",children:[{className:"propRow propSection",text:"box layout"},{type:PropRow,props:[{id:"left"},{id:"right"}]},{type:PropRow,props:[{id:"top"},{id:"bottom"}]},{type:PropRow,props:[{id:"minWidth"},{title:"height",id:"minHeight"}]},{type:PropRow,props:[{id:"maxWidth"},{title:"height",id:"maxHeight"}]},{type:PropRow,props:[{id:"layoutWidth"},{title:"height",id:"layoutHeight"}]},{type:PropRow,props:[{id:"centerX",type:"boolean"},{id:"centerY",type:"boolean"}]}]},{id:"linearProps",children:[{className:"propRow propSection",text:"linear layout"},{type:PropRow,prop:"subviews"},{type:PropRow,prop:"direction"},{type:PropRow,prop:"justifyContent"},{type:PropRow,prop:{id:"padding",type:"string"}}]},{className:"propRow propSection",text:"absolute position"},{type:PropRow,props:[{title:"x",id:"absX"},{title:"y",id:"absY"}]},{type:PropRow,prop:{title:"r",id:"absR",increment:.01}},{type:PropRow,props:[{title:"width",id:"absWidth"},{title:"height",id:"absHeight"}]},{type:PropRow,prop:{title:"scale",id:"absScale"}},{tag:"div",id:"dropArea",text:"Drop Here ",children:[{tag:"button",id:"saveImg",text:"save image"}]}]}]},this.buildWidget=function(){this._children.forEach(function(t){t instanceof PropRow&&t.props.forEach(function(e){this[e.id]=t[e.id],this[e.id].subscribe("ValueChange",this,"_onValueChange",e.id)},this)},this)},this.delegate=function(t){"_closeBtn"==t&&this._inspector.close()},this._onValueChange=function(t){if(this._viewUID){var e=this[t].getValue();this._inspector.setViewProp(this._viewUID,t,e)}},this.setInspector=function(t){this._inspector=t},this.imageView=function(t,e){this._inspector.getViewProps({uid:t}).bind(this).then(function(i){this.dropArea.style.display=i.isImageView?"block":"none",e.currentImage&&e.currentImage.data?this.saveImg.style.display="block":this.saveImg.style.display="none",i.isImageView?(e.currentImage||(e.currentImage={}),e.currentImage.uid=t,e.currentImage.path=i.imagePath):delete e.currentImage},function(t){logger.warn(t)})},this.showView=function(t){this._viewUID=t,t&&this._inspector.getViewProps({uid:t}).bind(this).then(function(t){this.viewDetails.setText(t.description),"linear"==t.layout?$.show(this.linearProps):$.hide(this.linearProps);for(var e in t)this[e]&&this[e].setValue&&this[e].setValue(t[e])},function(t){logger.warn(t)})},this.hideProps=function(){for(var t,e=0;t=arguments[e];++e)$.hide(this["_row"+t])},this.showProps=function(){for(var t,e=0;t=arguments[e];++e)$.show(this["_row"+t])},this.init=function(){t(this,"init",arguments),this.dropArea.addEventListener("dragenter",noop,!1),this.dropArea.addEventListener("dragexit",bind(this,function(t){return this.dropArea.className="",noop(t)}),!1),this.dropArea.addEventListener("dragover",bind(this,function(t){return this.dropArea.className="over",noop(t)}),!1),this.dropArea.addEventListener("drop",bind(this,this.dropImage),!1),this.saveImg.addEventListener("click",bind(this,this.saveImage),!1)},this.dropImage=function(t){var e=t.dataTransfer.files,i=e.length,o=e[0];if(1>i)return console.log("No image found");var r=new FileReader;return r.onload=bind(this,function(t){currentNode&&currentNode.currentImage&&(this._inspector.setImage(currentNode.currentImage.uid,t.target.result),currentNode.currentImage.data=t.target.result)}),r.readAsDataURL(o),this.saveImg.style.display="block",noop(t)},this.saveImage=function(){var t=currentNode&&currentNode.currentImage;if(t){var e=encodeURIComponent(t.path.substr(10));util.ajax.post({url:"/art/replaceImage/"+this._opts.appID+"/"+e,data:{data:t.data},headers:{"Content-Type":"application/json"}},bind(this,function(t,e){t||(delete currentNode.currentImage.data,this.saveImg.style.display="none")}))}}});'),jsio.setCachedSrc("devkit-view-inspector/debugger/InputWidget.js",'jsio("import squill.Widget as Widget"),jsio("from util.browser import $"),exports=Class(Widget,function(e){function t(e,t){var s=e+t,i=t.toString().split(".");if(i.length>1){var a=i[1].length;s=+s.toFixed(a)}return s}this._def={children:[{type:"text",id:"_value"}]},this.buildWidget=function(){this._value.subscribe("ValueChange",this,"publish","ValueChange"),this._value.subscribe("Blur",this,"_onBlur"),this._value.subscribe("Focus",this,"_onFocus"),this._value.subscribe("Down",this,"_onMouseDown"),this._value.subscribe("KeyDown",this,"_onKeyDown");var e=this._value.getInputElement(),t=this._opts.prop||{};switch(t.readOnly&&(this._isReadyOnly=!0,e.style.cursor="default"),t.type){case"boolean":this._type="boolean",e.style.cursor="pointer";break;case"string":this._type="string";break;case"number":default:this._type="number","min"in t&&(this._min=t.min),"max"in t&&(this._max=t.max),this._increment=t.increment}this.initMouseEvents()},this._onMouseDown=function(e){return this._isReadyOnly?void $.stopEvent(e):void("boolean"==this._type&&(this._setValue(!this.getValue()),$.stopEvent(e)))},this._onFocus=function(){switch(this._type){case"boolean":this._value.getElement().blur()}},this._onBlur=function(){this.setValue(this.getValue())},this._setValue=function(e){this.setValue(e),this.publish("ValueChange",this._value.getValue())},this.setValue=function(e){switch(this._lastValue=e,this._type){case"number":void 0==e&&(e="-"),this._value.setValue(e);break;case"boolean":this._value.setValue(e?"true":"false");break;case"string":default:this._value.setValue(""+e)}},this._onKeyDown=function(e){switch(e.keyCode){case 37:break;case 38:this._setValue(t(this.getValue(),this._increment||1)),$.stopEvent(e);break;case 39:break;case 40:this._setValue(t(this.getValue(),-(this._increment||1))),$.stopEvent(e)}},this.getValue=function(){switch(this._type){case"number":var e=this._value.getValue();return"-"==e?void 0:(e=parseFloat(e),"_max"in this&&e>this._max&&(e=this._max),"_min"in this&&e<this._min&&(e=this._min),isNaN(e)?this._lastValue:e);case"boolean":return"true"==this._value.getValue();default:case"string":return this._value.getValue()}}});'),
jsio.setCachedSrc("devkit-view-inspector/debugger/ViewNode.js",'jsio("from util.browser import $"),jsio("import squill.Widget as Widget");var ViewNode=exports=Class(Widget,function(i){this._def={className:"viewNode",children:[{id:"_label",className:"label",children:[{id:"_toggleBtn",className:"toggleBtn"},{id:"_labelText",tag:"span",type:"label"}]},{id:"_childNodes",className:"children"}]},this.init=function(t){this._inspector=t.inspector,this._viewUID=t.viewUID,this._indent=t.indent||0,this._subs=[],this._nodes=[],this._getChildren=void 0===t.getChildren?!0:!!t.getChildren,i(this,"init",arguments)},this.getViewUID=function(){return this._viewUID},this.buildWidget=function(i){var t=this._viewUID;$.style(this._label,{paddingLeft:10+15*this._indent+"px"}),this._isToggled=!1,this.refresh(),this._subs.push($.onEvent(this._label,"click",this,"toggle"),$.onEvent(this._label,"click",this,"select"),$.onEvent(this._label,"mouseover",this._inspector,"highlightView",t),$.onEvent(this._label,"mouseout",this._inspector,"highlightView",null)),this._inspector._addNode(this._viewUID,this)},this.select=function(){this._inspector.selectView(this._viewUID),this._inspector.highlightView(this._viewUID)},this.highlight=function(i,t){var e=""+i+t;this._state!=e&&(this._state=e,i?t===!1?($.addClass(this._el,"highlightParent"),$.removeClass(this._el,"highlight")):($.addClass(this._el,"highlight"),$.removeClass(this._el,"highlightParent")):($.removeClass(this._el,"highlight"),$.removeClass(this._el,"highlightParent")))},this.show=function(){this._inspector.highlightView(this._viewUID)},this.destroy=function(){for(var i,t=0;i=this._subs[t];++t)i();for(var e,t=0;e=this._nodes[t];++t)e.destroy();$.remove(this._el),this._inspector._removeNode(this._viewUID),this._viewUID=null},this.refresh=function(){this._inspector&&this._inspector.requestView(this._viewUID).bind(this).then(function(i){if(this._details=i,i.tag!=this._tag&&(this._tag=i.tag,$.setText(this._labelText,i.tag)),this._hasChildren=i.subviewIds&&i.subviewIds.length>0,this.updateToggleText(),this._isToggled){var t,e,s,h={};for(t=0;e=this._nodes[t];++t)h[e.getViewUID()]=e;for(this._nodes=[],t=0,s;s=i.subviewIds[t];++t)s in h?(this._nodes[t]=h[s],delete h[s],this._nodes[t].refresh(),t>0&&this._nodes[t]._el.previousSibling!=this._nodes[t-1]._el&&this._childNodes.insertBefore(this._nodes[t]._el,this._nodes[t-1]._el.nextSibling)):this._nodes[t]=new ViewNode({inspector:this._inspector,viewUID:s,parent:this._childNodes,indent:this._indent+1});for(s in h)h[s].destroy();this._inspector.updateTrace()}},function(i){logger.warn(i)})},this.setSelected=function(i){i?$.addClass(this._el,"selected"):$.removeClass(this._el,"selected")},this.updateToggleText=function(){var i=this._hasChildren?this._isToggled?"":"":"";i!=this._toggleText&&($.setText(this._toggleBtn,i),this._toggleText=i)},this.isToggled=function(){return this._isToggled},this.toggle=function(){this._isToggled=!this._isToggled,this.updateToggleText(),$.style(this._childNodes,{display:this._isToggled?"block":"none"})}});'),jsio.setCachedSrc("devkit-view-inspector/debugger/BatchGetView.js",'var Promise=devkit.Promise;module.exports=Class(function(){this.init=function(i){this._inflight=!1,this._uids=[],this._pending={},this._requestFunc=i},this.request=function(i){if(!(i in this._pending)){this._uids.push(i);var t=this._pending[i]={};t.promise=new Promise(function(i,n){t.resolve=i,t.reject=n})}return this._pending[i].promise},this.dispatch=function(){if(this._uids.length&&!this._inflight){var i=this._uids;this._inflight=!0,this._uids=[],this._requestFunc({uids:i}).bind(this).timeout(1e4).then(function(t){i.forEach(function(i){var n=this._pending[i];delete this._pending[i],i in t?n.resolve(t[i]):n.reject(t[i])},this)})["finally"](function(){this._inflight=!1})}}});');;jsio("import src.devkit-view-inspector.debugger")})(jsio.clone());